
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../overview/">
      
      
        <link rel="next" href="../launching-bpfman/">
      
      
      <link rel="icon" href="../../img/icon/color/bpfman-icon-color.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Setup and Building - bpfman</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#setup-and-building-bpfman" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="bpfman" class="md-header__button md-logo" aria-label="bpfman" data-md-component="logo">
      
  <img src="../../img/icon/color/bpfman-icon-color.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            bpfman
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Setup and Building
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bpfman/bpfman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../quick-start/" class="md-tabs__link">
        
  
  
    
  
  Quick Start

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  
    
  
  User Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../governance/CONTRIBUTING/" class="md-tabs__link">
          
  
  
    
  
  Developer Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../design/daemonless/" class="md-tabs__link">
          
  
  
    
  
  Design

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../governance/MEETINGS/" class="md-tabs__link">
          
  
  
    
  
  Community

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="bpfman" class="md-nav__button md-logo" aria-label="bpfman" data-md-component="logo">
      
  <img src="../../img/icon/color/bpfman-icon-color.svg" alt="logo">

    </a>
    bpfman
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bpfman/bpfman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpfman Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Setup and Building
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Setup and Building
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kernel-versions" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel Versions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-environment-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Development Environment Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development Environment Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-rust-toolchain" class="md-nav__link">
    <span class="md-ellipsis">
      Install Rust Toolchain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-llvm" class="md-nav__link">
    <span class="md-ellipsis">
      Install LLVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-ssl-library" class="md-nav__link">
    <span class="md-ellipsis">
      Install SSL Library
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-bpf-helper-header-files" class="md-nav__link">
    <span class="md-ellipsis">
      Install bpf Helper Header Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-protobuf-compiler" class="md-nav__link">
    <span class="md-ellipsis">
      Install Protobuf Compiler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-go-protobuf-compiler-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Install GO protobuf Compiler Extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-libbpf" class="md-nav__link">
    <span class="md-ellipsis">
      Local libbpf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-perl" class="md-nav__link">
    <span class="md-ellipsis">
      Install perl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-docker-or-podman" class="md-nav__link">
    <span class="md-ellipsis">
      Install docker or podman
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-kind" class="md-nav__link">
    <span class="md-ellipsis">
      Install Kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-bash-completion" class="md-nav__link">
    <span class="md-ellipsis">
      Install bash-completion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-yaml-formatter" class="md-nav__link">
    <span class="md-ellipsis">
      Install Yaml Formatter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-toml-formatter" class="md-nav__link">
    <span class="md-ellipsis">
      Install toml Formatter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-the-bpfman-and-bpfman-operator-repositories" class="md-nav__link">
    <span class="md-ellipsis">
      Clone the bpfman and bpfman-operator Repositories
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-bpfman" class="md-nav__link">
    <span class="md-ellipsis">
      Building bpfman
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-cli-tab-completion-files" class="md-nav__link">
    <span class="md-ellipsis">
      Building CLI TAB completion files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building CLI TAB completion files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bash" class="md-nav__link">
    <span class="md-ellipsis">
      bash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-shells" class="md-nav__link">
    <span class="md-ellipsis">
      Other shells
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-cli-manpages" class="md-nav__link">
    <span class="md-ellipsis">
      Building CLI Manpages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-bpfman-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Building bpfman-operator
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../launching-bpfman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launching bpfman
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf-local/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploying Example eBPF Programs On Local Host
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operator-quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploying the bpfman-operator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf-k8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploying Example eBPF Programs On Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run bpfman From Release Image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-rpm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run bpfman From RPM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Example eBPF Programs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/REVIEWING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reviewing Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/develop-operator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing the bpfman-operator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/api-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes CRD API-Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/shipping-bytecode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Bytecode Image Specifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/image-build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpfman Container Images
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/linux-capabilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux Capabilities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/pre-commit-hook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pre-Commit Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Releasing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/xdp-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XDP Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/k8s-selinux-distros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running the Examples as Non-Root on SELinux Distributions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/daemonless/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Daemonless
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/clusterVsNamespaceScoped/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpfman CRDs - Cluster vs Namespace Scoped
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/community-meeting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Community Meeting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Community
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/MEETINGS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meetings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/GOVERNANCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code of Conduct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/MAINTAINERS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maintainers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/SECURITY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kernel-versions" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel Versions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-environment-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Development Environment Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development Environment Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-rust-toolchain" class="md-nav__link">
    <span class="md-ellipsis">
      Install Rust Toolchain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-llvm" class="md-nav__link">
    <span class="md-ellipsis">
      Install LLVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-ssl-library" class="md-nav__link">
    <span class="md-ellipsis">
      Install SSL Library
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-bpf-helper-header-files" class="md-nav__link">
    <span class="md-ellipsis">
      Install bpf Helper Header Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-protobuf-compiler" class="md-nav__link">
    <span class="md-ellipsis">
      Install Protobuf Compiler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-go-protobuf-compiler-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Install GO protobuf Compiler Extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-libbpf" class="md-nav__link">
    <span class="md-ellipsis">
      Local libbpf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-perl" class="md-nav__link">
    <span class="md-ellipsis">
      Install perl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-docker-or-podman" class="md-nav__link">
    <span class="md-ellipsis">
      Install docker or podman
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-kind" class="md-nav__link">
    <span class="md-ellipsis">
      Install Kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-bash-completion" class="md-nav__link">
    <span class="md-ellipsis">
      Install bash-completion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-yaml-formatter" class="md-nav__link">
    <span class="md-ellipsis">
      Install Yaml Formatter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-toml-formatter" class="md-nav__link">
    <span class="md-ellipsis">
      Install toml Formatter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-the-bpfman-and-bpfman-operator-repositories" class="md-nav__link">
    <span class="md-ellipsis">
      Clone the bpfman and bpfman-operator Repositories
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-bpfman" class="md-nav__link">
    <span class="md-ellipsis">
      Building bpfman
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-cli-tab-completion-files" class="md-nav__link">
    <span class="md-ellipsis">
      Building CLI TAB completion files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building CLI TAB completion files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bash" class="md-nav__link">
    <span class="md-ellipsis">
      bash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-shells" class="md-nav__link">
    <span class="md-ellipsis">
      Other shells
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-cli-manpages" class="md-nav__link">
    <span class="md-ellipsis">
      Building CLI Manpages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-bpfman-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Building bpfman-operator
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="setup-and-building-bpfman">Setup and Building bpfman</h1>
<p>This section describes how to build bpfman.
If this is the first time building bpfman, the
<a href="#development-environment-setup">Development Environment Setup</a> section describes all packages needed
to build bpfman.</p>
<p>There is also an option to run prebuilt images from a given release or from an RPM, as opposed to
building locally.
Jump to:</p>
<ul>
<li><a href="../running-release/">Run bpfman From Release Image</a> for installing from a prebuilt fixed release.</li>
<li><a href="../running-rpm/">Run bpfman From RPM</a> for installing from a prebuilt RPM.</li>
</ul>
<h2 id="kernel-versions">Kernel Versions</h2>
<p>eBPF is still a relatively new technology that is being actively developed.
To take advantage of this constantly evolving technology, it is best to use the newest
kernel version possible.
If bpfman needs to be run on an older kernel, this section describes some of the kernel
features bpfman relies on to work and which kernel the feature was first introduced.</p>
<p>Major kernel features leveraged by bpfman:</p>
<ul>
<li><strong>Program Extensions:</strong> Program Extensions allows bpfman to load multiple XDP or TC eBPF programs
  on an interface, which is not natively supported in the kernel.
  A <code>dispatcher</code> program is loaded as the one program on a given interface, and the user's XDP or TC
  programs are loaded as extensions to the <code>dispatcher</code> program.
  Introduced in Kernel 5.6.</li>
<li><strong>Pinning:</strong> Pinning allows the eBPF program to remain loaded when the loading process (bpfman) is
  stopped or restarted.
  Introduced in Kernel 4.11.</li>
<li><strong>BPF Perf Link:</strong> Support BPF perf link for tracing programs (Tracepoint, Uprobe and Kprobe)
  which enables pinning for these program types.
  Introduced in Kernel 5.15.</li>
<li><strong>Relaxed CAP_BPF Requirement:</strong> Prior to Kernel 5.19, all eBPF system calls required CAP_BPF.
  This required userspace programs that wanted to access eBPF maps to have the CAP_BPF Linux capability.
  With the kernel 5.19 change, CAP_BPF is only required for load and unload requests.</li>
<li><strong>TCX:</strong> TCX has performance improvements over TC and adds support in the kernel for multiple TCX
  programs to run on a given TC hook point. TCX support was added in Kernel 6.6.</li>
</ul>
<p>bpfman tested on older kernel versions:</p>
<ul>
<li>Fedora 34: Kernel 5.17.6-100.fc34.x86_64<ul>
<li>XDP, TC, Tracepoint, Uprobe and Kprobe programs all loaded with bpfman running on localhost
  and running as systemd service.</li>
</ul>
</li>
<li>Fedora 33: Kernel 5.14.18-100.fc33.x86_64<ul>
<li>XDP and TC programs loaded with bpfman running on localhost and running as systemd service
  once SELinux was disabled (see https://github.com/fedora-selinux/selinux-policy/pull/806).</li>
<li>Tracepoint, Uprobe and Kprobe programs failed to load because they require the <code>BPF Perf Link</code>
  support.</li>
</ul>
</li>
<li>Fedora 32: Kernel 5.11.22-100.fc32.x86_64<ul>
<li>XDP and TC programs loaded with bpfman running on localhost once SELinux was disabled
  (see https://github.com/fedora-selinux/selinux-policy/pull/806).</li>
<li>bpfman fails to run as a systemd service because of some capabilities issues in the
  bpfman.service file.</li>
<li>Tracepoint, Uprobe and Kprobe programs failed to load because they require the <code>BPF Perf Link</code>
  support.</li>
</ul>
</li>
<li>Fedora 31: Kernel 5.8.18-100.fc31.x86_64<ul>
<li>bpfman was able to start on localhost, but XDP and TC programs wouldn't load because
  <code>BPF_LINK_CREATE</code> call was updated in newer kernels.</li>
<li>bpfman fails to run as a systemd service because of some capabilities issues in the
  bpfman.service file.</li>
</ul>
</li>
</ul>
<h2 id="development-environment-setup">Development Environment Setup</h2>
<p>To build bpfman, the following packages must be installed.</p>
<h3 id="install-rust-toolchain">Install Rust Toolchain</h3>
<p>For further detailed instructions, see
<a href="https://www.rust-lang.org/tools/install">Rust Stable &amp; Rust Nightly</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="go">curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="go">source &quot;$HOME/.cargo/env&quot;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="go">rustup toolchain install nightly -c rustfmt,clippy,rust-src</span>
</code></pre></div>
<h3 id="install-llvm">Install LLVM</h3>
<p>LLVM 11 or later must be installed.
Linux package managers should provide a recent enough release.</p>
<p><code>dnf</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="go">sudo dnf install llvm-devel clang-devel elfutils-libelf-devel</span>
</code></pre></div>
<p><code>apt</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="go">sudo apt install clang lldb lld libelf-dev gcc-multilib</span>
</code></pre></div>
<h3 id="install-ssl-library">Install SSL Library</h3>
<p><code>dnf</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="go">sudo dnf install openssl-devel</span>
</code></pre></div>
<p><code>apt</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="go">sudo apt install libssl-dev</span>
</code></pre></div>
<h3 id="install-bpf-helper-header-files">Install bpf Helper Header Files</h3>
<p><code>apt</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="go">sudo apt install libbpf-dev</span>
</code></pre></div>
<h3 id="install-protobuf-compiler">Install Protobuf Compiler</h3>
<p>If any of the <a href="https://github.com/bpfman/bpfman/tree/main/proto">Protobuf files</a> need to be updated,
then the protobuf-compiler will need to be installed.
See <a href="../../developer-guide/develop-operator/#rpc-protobuf-generation">RPC Protobuf Generation</a> for bpfman
use of protobufs and see <a href="https://grpc.io/docs/protoc-installation/">protoc</a> for more detailed installation
instructions.</p>
<p><code>dnf</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="go">sudo dnf install protobuf-compiler</span>
</code></pre></div>
<p><code>apt</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="go">sudo apt install protobuf-compiler</span>
</code></pre></div>
<h3 id="install-go-protobuf-compiler-extensions">Install GO protobuf Compiler Extensions</h3>
<p>See <a href="https://grpc.io/docs/languages/go/quickstart/">Quick Start Guide for gRPC in Go</a> for
installation instructions.</p>
<h3 id="local-libbpf">Local libbpf</h3>
<p>Checkout a local copy of libbpf.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="go">git clone https://github.com/libbpf/libbpf --branch v0.8.0</span>
</code></pre></div>
<h3 id="install-perl">Install perl</h3>
<p>Install <code>perl</code>:</p>
<p><code>dnf</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="go">sudo dnf install perl</span>
</code></pre></div>
<p><code>apt</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="go">sudo apt install perl</span>
</code></pre></div>
<h3 id="install-docker-or-podman">Install docker or podman</h3>
<p>To build the <code>bpfman-agent</code> and <code>bpfman-operator</code> using the provided Makefile and the
<code>make build-images</code> command, <code>docker</code> or <code>podman</code> needs to be installed.
There are several existing guides:</p>
<ul>
<li>Fedora: <a href="https://developer.fedoraproject.org/tools/docker/docker-installation.html">https://developer.fedoraproject.org/tools/docker/docker-installation.html</a></li>
<li>Linux: <a href="https://docs.docker.com/engine/install/">https://docs.docker.com/engine/install/</a></li>
</ul>
<h3 id="install-kind">Install Kind</h3>
<p>Optionally, to test <code>bpfman</code> running in Kubernetes, the easiest method and the one documented
throughout the <code>bpfman</code> documentation is to run a Kubernetes Kind cluster.
See <a href="https://kind.sigs.k8s.io/">kind</a> for documentation and installation instructions.
<code>kind</code> also requires <code>docker</code> to be installed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, bpfman-operator deploys bpfman with CSI enabled.
CSI requires Kubernetes v1.26 due to a PR
(<a href="https://github.com/kubernetes/kubernetes/pull/112597">kubernetes/kubernetes#112597</a>)
that addresses a gRPC Protocol Error that was seen in the CSI client code and it doesn't appear
to have been backported.
kind v0.20.0 or later is recommended.</p>
</div>
<p>If the following error is seen, it means there is an older version of Kubernetes running and it
needs to be upgraded.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="go">kubectl get pods -A</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="go">NAMESPACE   NAME                               READY   STATUS             RESTARTS      AGE</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="go">bpfman      bpfman-daemon-2hnhx                2/3     CrashLoopBackOff   4 (38s ago)   2m20s</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="go">bpfman      bpfman-operator-6b6cf97857-jbvv4   2/2     Running            0             2m22s</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="go">:</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="go">kubectl logs -n bpfman bpfman-daemon-2hnhx -c node-driver-registrar</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="go">:</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="go">E0202 15:33:12.342704       1 main.go:101] Received NotifyRegistrationStatus call: &amp;RegistrationStatus{PluginRegistered:false,Error:RegisterPlugin error -- plugin registration failed with err: rpc error: code = Internal desc = stream terminated by RST_STREAM with error code: PROTOCOL_ERROR,}</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="go">E0202 15:33:12.342723       1 main.go:103] Registration process failed with error: RegisterPlugin error -- plugin registration failed with err: rpc error: code = Internal desc = stream terminated by RST_STREAM with error code: PROTOCOL_ERROR, restarting registration container.</span>
</code></pre></div>
<h3 id="install-bash-completion">Install bash-completion</h3>
<p><code>bpfman</code> uses the Rust crate <code>clap</code> for the CLI implementation.
<code>clap</code> has an optional Rust crate <code>clap_complete</code>. For <code>bash</code> shell, it leverages
<code>bash-completion</code> for CLI Command <TAB> completion.
So in order for CLI <TAB> completion to work in a <code>bash</code> shell, <code>bash-completion</code>
must be installed.
This feature is optional.</p>
<p>For the CLI <TAB> completion to work after installation, <code>/etc/profile.d/bash_completion.sh</code>
must be sourced in the running sessions.
New login sessions should pick it up automatically.</p>
<p><code>dnf</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="go">sudo dnf install bash-completion</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="go">source /etc/profile.d/bash_completion.sh</span>
</code></pre></div>
<p><code>apt</code> based OS:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="go">sudo apt install bash-completion</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="go">source /etc/profile.d/bash_completion.sh</span>
</code></pre></div>
<h3 id="install-yaml-formatter">Install Yaml Formatter</h3>
<p>As part of CI, the Yaml files are validated with a Yaml formatter.
Optionally, to verify locally, install the
<a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml">YAML Language Support by Red Hat</a>
VsCode Extension, or to format in bulk, install <code>prettier</code>.</p>
<p>To install <code>prettier</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="go">npm install -g prettier</span>
</code></pre></div>
<p>Then to flag which files are violating the formatting guide, run:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="go">prettier -l &quot;*.yaml&quot;</span>
</code></pre></div>
<p>And to write changes in place, run:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="go"> prettier -f &quot;*.yaml&quot;</span>
</code></pre></div>
<h3 id="install-toml-formatter">Install toml Formatter</h3>
<p>As part of CI, the toml files are validated with a toml formatter.
Optionally, to verify locally, install <code>taplo</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="go">cargo install taplo-cli</span>
</code></pre></div>
<p>And to verify locally:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="go">taplo fmt --check</span>
</code></pre></div>
<h2 id="clone-the-bpfman-and-bpfman-operator-repositories">Clone the bpfman and bpfman-operator Repositories</h2>
<p>You can build and run bpfman from anywhere.
For simplicity throughout this documentation, all examples will reference
<code>bpfman/</code> and <code>bpfman-operator/</code> to indicate which repository is being used.
bpfman-operator only needs to be cloned if deploying in Kubernetes.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>cd $SRC_DIR
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>git clone https://github.com/bpfman/bpfman.git
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>git clone https://github.com/bpfman/bpfman-operator.git
</code></pre></div>
<h2 id="building-bpfman">Building bpfman</h2>
<p>If you are building bpfman for the first time OR the eBPF code has changed:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="go">cd bpfman/</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="go">cargo xtask build-ebpf --libbpf-dir /path/to/libbpf</span>
</code></pre></div>
<p>If protobuf files have changed (see
<a href="../../developer-guide/develop-operator/#rpc-protobuf-generation">RPC Protobuf Generation</a>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="go">cargo xtask build-proto</span>
</code></pre></div>
<p>To build bpfman:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="go">cargo build</span>
</code></pre></div>
<h2 id="building-cli-tab-completion-files">Building CLI TAB completion files</h2>
<p>Optionally, to build the CLI TAB completion files, run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="go">cd bpfman/</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="go">cargo xtask build-completion</span>
</code></pre></div>
<p>Files are generated for different shells:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="go">ls .output/completions/</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="go">_bpfman  bpfman.bash  bpfman.elv  bpfman.fish  _bpfman.ps1</span>
</code></pre></div>
<h3 id="bash">bash</h3>
<p>For <code>bash</code>, this generates a file that can be used by the linux <code>bash-completion</code>
utility (see <a href="#install-bash-completion">Install bash-completion</a> for installation
instructions).</p>
<p>If the files are generated, they are installed automatically when using the install
script (i.e. <code>sudo ./scripts/setup.sh install</code> - See
<a href="../example-bpf-local/#run-as-a-systemd-service">Run as a systemd Service</a>).
To install the files manually, copy the file associated with a given shell to
<code>/usr/share/bash-completion/completions/</code>.
For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="go">sudo cp .output/completions/bpfman.bash /usr/share/bash-completion/completions/.</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="go">bpfman g&lt;TAB&gt;</span>
</code></pre></div>
<h3 id="other-shells">Other shells</h3>
<p>Files are generated other shells (Elvish, Fish, PowerShell and zsh).
For these shells, generated file must be manually installed.</p>
<h2 id="building-cli-manpages">Building CLI Manpages</h2>
<p>Optionally, to build the CLI Manpage files, run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="go">cd bpfman/</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="go">cargo xtask build-man-page</span>
</code></pre></div>
<p>If the files are generated, they are installed automatically when using the install
script (i.e. <code>sudo ./scripts/setup.sh install</code> - See
<a href="../example-bpf-local/#run-as-a-systemd-service">Run as a systemd Service</a>).
To install the files manually, copy the generated files to <code>/usr/local/share/man/man1/</code>.
For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="go">sudo cp .output/manpage/bpfman*.1 /usr/local/share/man/man1/.</span>
</code></pre></div>
<p>Once installed, use <code>man</code> to view the pages.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="go">man bpfman attach</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>bpfman</code> commands with subcommands (specifically <code>bpfman load</code>, <code>bpfman list</code> and <code>bpfman get</code>)
have <code>-</code> in the manpage subcommand generation.
So use <code>man bpfman load-file</code>, <code>man bpfman load-image</code>, <code>man bpfman load-image-xdp</code>,
<code>man bpfman list-programs</code>, etc. to display the subcommand manpage files.</p>
</div>
<h2 id="building-bpfman-operator">Building bpfman-operator</h2>
<p>Building and deploying bpfman-operator is covered in it's own section.
See <a href="../example-bpf-k8s/">Deploying Example eBPF Programs On Kubernetes</a> and
<a href="../../developer-guide/develop-operator/">Developing the bpfman-operator</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
    
      <div class="md-copyright__highlight">
        Copyright &copy; 2021-2024 The bpfman contributors.<br>The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a>.
      </div>
    
    
      Made with
      <a
        href="https://squidfunk.github.io/mkdocs-material/"
        target="_blank" rel="noopener"
      >
        Material for MkDocs
      </a>
    
  </div>
  <div class="md-copyright__netlify">
    <a href="https://www.netlify.com"> <img src="https://www.netlify.com/v3/img/components/netlify-color-accent.svg" alt="Deploys by Netlify" /> </a>
  </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.tabs.sticky", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>