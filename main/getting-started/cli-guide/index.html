
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../running-rpm/">
      
      
        <link rel="next" href="../example-bpf/">
      
      
      <link rel="icon" href="../../img/icon/color/bpfman-icon-color.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>CLI Guide - bpfman</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cli-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="bpfman" class="md-header__button md-logo" aria-label="bpfman" data-md-component="logo">
      
  <img src="../../img/icon/color/bpfman-icon-color.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            bpfman
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CLI Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bpfman/bpfman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../quick-start/" class="md-tabs__link">
        
  
  
    
  
  Quick Start

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  
    
  
  User Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../governance/CONTRIBUTING/" class="md-tabs__link">
          
  
  
    
  
  Developer Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../design/daemonless/" class="md-tabs__link">
          
  
  
    
  
  Design

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../governance/MEETINGS/" class="md-tabs__link">
          
  
  
    
  
  Community

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="bpfman" class="md-nav__button md-logo" aria-label="bpfman" data-md-component="logo">
      
  <img src="../../img/icon/color/bpfman-icon-color.svg" alt="logo">

    </a>
    bpfman
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bpfman/bpfman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpfman Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../building-bpfman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup and Building
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../launching-bpfman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launching bpfman
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf-local/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploying Example eBPF Programs On Local Host
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operator-quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploying the bpfman-operator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf-k8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploying Example eBPF Programs On Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run bpfman From Release Image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-rpm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run bpfman From RPM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    CLI Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    CLI Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#notes-for-this-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Notes For This Guide
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Syntax
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-load" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman load
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman load">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-load-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Example Load Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Load Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading-from-local-file" class="md-nav__link">
    <span class="md-ellipsis">
      Loading From Local File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-from-remote-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Loading From Remote Repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-multiple-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Loading Multiple Programs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-fentryfexit-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Loading fentry/fexit Programs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-probe-versus-retprobe-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Loading probe Versus retprobe Programs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-global-variables-in-ebpf-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Global Variables in eBPF Programs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-attach" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman attach
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman attach">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-attach-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Attach Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Additional Attach Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fentry" class="md-nav__link">
    <span class="md-ellipsis">
      Fentry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fexit" class="md-nav__link">
    <span class="md-ellipsis">
      Fexit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kprobe" class="md-nav__link">
    <span class="md-ellipsis">
      Kprobe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kretprobe" class="md-nav__link">
    <span class="md-ellipsis">
      Kretprobe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tc" class="md-nav__link">
    <span class="md-ellipsis">
      TC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcx" class="md-nav__link">
    <span class="md-ellipsis">
      TCX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tracepoint" class="md-nav__link">
    <span class="md-ellipsis">
      Tracepoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uprobe" class="md-nav__link">
    <span class="md-ellipsis">
      Uprobe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uretprobe" class="md-nav__link">
    <span class="md-ellipsis">
      Uretprobe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xdp" class="md-nav__link">
    <span class="md-ellipsis">
      XDP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attach-to-multiple-hook-points" class="md-nav__link">
    <span class="md-ellipsis">
      Attach to Multiple Hook Points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-the-proceed-on-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Modifying the Proceed-On Behavior
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-detach" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman detach
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-list" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman list
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman list">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bpfman-list-programs" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman list programs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpfman-list-links" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman list links
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-get" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman get
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman get">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bpfman-get-program" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman get program
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpfman-get-link" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman get link
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-unload" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman unload
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-image" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bpfman-image-pull" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman image pull
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpfman-image-build" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman image build
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpfman-image-generate-build-args" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman image generate-build-args
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Example eBPF Programs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/REVIEWING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reviewing Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/develop-operator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing the bpfman-operator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/api-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes CRD API-Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/shipping-bytecode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Bytecode Image Specifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/image-build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpfman Container Images
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/linux-capabilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux Capabilities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/pre-commit-hook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pre-Commit Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Releasing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/xdp-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XDP Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/k8s-selinux-distros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running the Examples as Non-Root on SELinux Distributions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/daemonless/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Daemonless
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/clusterVsNamespaceScoped/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpfman CRDs - Cluster vs Namespace Scoped
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/community-meeting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Community Meeting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Community
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/MEETINGS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meetings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/GOVERNANCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code of Conduct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/MAINTAINERS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maintainers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/SECURITY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#notes-for-this-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Notes For This Guide
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Syntax
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-load" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman load
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman load">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-load-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Example Load Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Load Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading-from-local-file" class="md-nav__link">
    <span class="md-ellipsis">
      Loading From Local File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-from-remote-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Loading From Remote Repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-multiple-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Loading Multiple Programs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-fentryfexit-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Loading fentry/fexit Programs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-probe-versus-retprobe-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Loading probe Versus retprobe Programs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-global-variables-in-ebpf-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Global Variables in eBPF Programs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-attach" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman attach
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman attach">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-attach-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Attach Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Additional Attach Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fentry" class="md-nav__link">
    <span class="md-ellipsis">
      Fentry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fexit" class="md-nav__link">
    <span class="md-ellipsis">
      Fexit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kprobe" class="md-nav__link">
    <span class="md-ellipsis">
      Kprobe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kretprobe" class="md-nav__link">
    <span class="md-ellipsis">
      Kretprobe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tc" class="md-nav__link">
    <span class="md-ellipsis">
      TC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcx" class="md-nav__link">
    <span class="md-ellipsis">
      TCX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tracepoint" class="md-nav__link">
    <span class="md-ellipsis">
      Tracepoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uprobe" class="md-nav__link">
    <span class="md-ellipsis">
      Uprobe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uretprobe" class="md-nav__link">
    <span class="md-ellipsis">
      Uretprobe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xdp" class="md-nav__link">
    <span class="md-ellipsis">
      XDP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attach-to-multiple-hook-points" class="md-nav__link">
    <span class="md-ellipsis">
      Attach to Multiple Hook Points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-the-proceed-on-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Modifying the Proceed-On Behavior
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-detach" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman detach
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-list" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman list
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman list">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bpfman-list-programs" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman list programs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpfman-list-links" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman list links
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-get" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman get
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman get">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bpfman-get-program" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman get program
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpfman-get-link" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman get link
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-unload" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman unload
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfman-image" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bpfman image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bpfman-image-pull" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman image pull
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpfman-image-build" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman image build
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpfman-image-generate-build-args" class="md-nav__link">
    <span class="md-ellipsis">
      bpfman image generate-build-args
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="cli-guide">CLI Guide</h1>
<p><code>bpfman</code> offers several CLI commands to manage eBPF programs.
The CLI allows you to <code>load</code>, <code>attach</code>, <code>detach</code>, <code>unload</code>, <code>get</code> and <code>list</code> eBPF programs.</p>
<h2 id="notes-for-this-guide">Notes For This Guide</h2>
<p>As described in other sections, <code>bpfman</code> can be run as either a privileged process or
a systemd service.
If run as a privileged process, <code>bpfman</code> will most likely be run from your local
development branch and will require <code>sudo</code>.
Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="go">sudo ./target/debug/bpfman list programs</span>
</code></pre></div>
<p>If run as a systemd service, <code>bpfman</code> will most likely be installed in your $PATH,
and will also require <code>sudo</code>.
Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="go">sudo bpfman list programs</span>
</code></pre></div>
<p>The examples here use <code>sudo bpfman</code> in place of <code>sudo ./target/debug/bpfman</code> for readability,
use as your system is deployed.</p>
<p>eBPF object files used in the examples are taken from the
<a href="https://github.com/bpfman/bpfman/tree/main/examples">examples</a> and
<a href="https://github.com/bpfman/bpfman/tree/main/tests/integration-test">integration-test</a> directories
from the <code>bpfman</code> repository.</p>
<h2 id="basic-syntax">Basic Syntax</h2>
<p>Below are the commands supported by <code>bpfman</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="go">sudo bpfman --help</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="go">An eBPF manager focusing on simplifying the deployment and administration of eBPF programs.</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="go">Usage: bpfman &lt;COMMAND&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="go">Commands:</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="go">  load    Load an eBPF program on the system</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="go">  unload  Unload an eBPF program using the Program Id</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="go">  attach  Attach an eBPF program to a hook point using the Program Id</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="go">  detach  Detach an eBPF program from a hook point using the Link Id</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="go">  list    List all loaded eBPF programs or attached links</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="go">  get     Get a loaded eBPF program or program attachment link</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="go">  image   eBPF Bytecode Image related commands</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="go">  help    Print this message or the help of the given subcommand(s)</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="go">Options:</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="go">  -h, --help</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="go">          Print help (see a summary with &#39;-h&#39;)</span>
</code></pre></div>
<p>The general flow for using the CLI is as follows:</p>
<ul>
<li><strong>Load Program</strong>: The first step is to load the eBPF Program (or Programs) using the
  <code>bpfman load</code> command.
  The programs can be from a locally built eBPF program (.o file) or an eBPF program
  packaged in a OCI container image from a given registry.
  Once the command completes successfully, the eBPF programs are loaded in kernel memory,
  but have not been attached to any hook points yet.</li>
<li><strong>Attach Program</strong>: The next step is to attach a loaded eBPF Program to a hook point
  using the <code>bpfman attach</code> command.
  Each program type (kprobe, tc, tracepoint, xdp, etc) has unique hook points and unique
  configuration data which is provided with the attach command.
  Once attached, the eBPF Program will be called if it's hook point is triggered.</li>
<li><strong>Display Programs</strong>: At any time, the set of programs loaded and attach can be displayed.
  To get a list of all the programs, use the <code>bpfman list programs</code> command.
  If a program shows up in the list then the program has been loaded.
  One of the attributes in the output is  the <code>Links</code> parameter.
  If there is a values in the <code>Links</code> parameter, then the program has also been attached.
  To retrieve all the parameters of a given program, use the <code>bpfman get program</code> command, which
  displays a given program based its <code>Program ID</code>, which can be found in the list output.
  To get a list of all the links, use the <code>bpfman list links</code> command.
  To retrieve all the parameters of a given link, use the <code>bpfman get link</code> command, which
  displays a given link based its <code>Link ID</code>, which can be found in the list output.</li>
<li><strong>Detach Program</strong>: Optionally, an eBPF Program can be detached from a hook point if desired
  using the <code>bpfman detach</code> command.</li>
<li><strong>Unload Program</strong>: Once an eBPF Program is no longer needed, the program can be unloaded
  using the <code>bpfman unload</code> command.
  The program does not need to be detached before being unloaded.</li>
</ul>
<h2 id="bpfman-load">bpfman load</h2>
<p>The <code>bpfman load file</code> and <code>bpfman load image</code> commands are used to load eBPF programs.
If the command is successful, the eBPF programs are loaded in kernel memory, but have
not been attached to any hook points yet (see <a href="#bpfman-attach">bpfman attach</a>).
If the bytecode file contains multiple eBPF programs, they should be loaded in a single
command by passing multiple &lt;TYPE>:&lt;NAME> pairs to the <code>--programs</code> parameters.
They need to be loaded in one command so each those eBPF programs can share any global
data and maps between the eBPF programs.</p>
<p>The <code>bpfman load file</code> command is used to load a locally built eBPF program.
The <code>bpfman load image</code> command is used to load an eBPF program packaged in a OCI container
image from a given registry.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="go">sudo bpfman load file --help</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="go">Load an eBPF program from a local .o file</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="go">Usage: bpfman load file [OPTIONS] --programs &lt;PROGRAMS&gt;... --path &lt;PATH&gt;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="go">Options:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="go">      --programs &lt;PROGRAMS&gt;...</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="go">          Required: The program type and eBPF function name that is the entry point</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="go">          for the eBPF program.</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="go">          Format &lt;TYPE&gt;:&lt;FUNC_NAME&gt;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="go">          For fentry and fexit, the function that is being attached to is also</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="go">          required at load time, so the format for fentry and fexit includes attach</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="go">          function.</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="go">          Format &lt;TYPE&gt;:&lt;FUNC_NAME&gt;:&lt;ATTACH_FUNC&gt;</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="go">          If the bytecode file contains multiple eBPF programs that need to be</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="go">          loaded, multiple eBPF programs can be entered by separating each</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="go">          &lt;TYPE&gt;:&lt;FUNC_NAME&gt; pair with a space.</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="go">          Example: --programs xdp:xdp_stats kprobe:kprobe_counter</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="go">          Example: --programs fentry:test_fentry:do_unlinkat</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="go">          [possible values for &lt;TYPE&gt;: fentry, fexit, kprobe, tc, tcx, tracepoint,</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="go">                                       uprobe, xdp]</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="go">  -p, --path &lt;PATH&gt;</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="go">          Required: Location of local bytecode file</span>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="go">          Example: --path /run/bpfman/examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="go">  -g, --global &lt;GLOBAL&gt;...</span>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="go">          Optional: Global variables to be set when program is loaded.</span>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="go">          Format: &lt;NAME&gt;=&lt;Hex Value&gt;</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="go">          This is a very low level primitive. The caller is responsible for formatting</span>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="go">          the byte string appropriately considering such things as size, endianness,</span>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="go">          alignment and packing of data structures. Multiple values can be enter by</span>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="go">          separating each &lt;NAME&gt;=&lt;Hex Value&gt; pair with a space.</span>
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="go">          Example: -g GLOBAL_u8=01 GLOBAL_u32=0A0B0C0D</span>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="go">  -a, --application &lt;APPLICATION&gt;</span>
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a><span class="go">          Optional: Application is used to group multiple programs that are loaded together</span>
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a><span class="go">          under the same load command. This actually creates a special &lt;KEY&gt;=&lt;VALUE&gt; in the</span>
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="go">          metadata parameter. It can be used to filer on list commands.</span>
<a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="go">          Example: --application TestEbpfApp</span>
<a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a>
<a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a><span class="go">  -m, --metadata &lt;METADATA&gt;</span>
<a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a><span class="go">          Optional: Specify Key/Value metadata to be attached to a program when it</span>
<a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a><span class="go">          is loaded by bpfman.</span>
<a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a><span class="go">          Format: &lt;KEY&gt;=&lt;VALUE&gt;</span>
<a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a>
<a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a><span class="go">          This can later be used to `list` a certain subset of programs which contain</span>
<a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a><span class="go">          the specified metadata.</span>
<a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a><span class="go">          Example: --metadata owner=acme</span>
<a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a>
<a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a><span class="go">      --map-owner-id &lt;MAP_OWNER_ID&gt;</span>
<a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a><span class="go">          Optional: Program Id of loaded eBPF program this eBPF program will share a map with.</span>
<a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a><span class="go">          Only used when multiple eBPF programs need to share a map.</span>
<a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a><span class="go">          Example: --map-owner-id 63178</span>
<a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a>
<a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a><span class="go">  -h, --help</span>
<a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a><span class="go">          Print help (see a summary with &#39;-h&#39;)</span>
</code></pre></div>
<p>and</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="go">sudo bpfman load image --help</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="go">Load an eBPF program packaged in a OCI container image from a given registry</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="go">Usage: bpfman load image [OPTIONS] --programs &lt;PROGRAMS&gt;... --image-url &lt;IMAGE_URL&gt;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="go">Options:</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="go">      --programs &lt;PROGRAMS&gt;...</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="go">          Required: The program type and eBPF function name that is the entry point</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="go">          for the eBPF program.</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="go">          Format &lt;TYPE&gt;:&lt;FUNC_NAME&gt;</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="go">          For fentry and fexit, the function that is being attached to is also</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="go">          required at load time, so the format for fentry and fexit includes attach</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="go">          function.</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="go">          Format &lt;TYPE&gt;:&lt;FUNC_NAME&gt;:&lt;ATTACH_FUNC&gt;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="go">          If the bytecode file contains multiple eBPF programs that need to be</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="go">          loaded, multiple eBPF programs can be entered by separating each</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="go">          &lt;TYPE&gt;:&lt;FUNC_NAME&gt; pair with a space.</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="go">          Example: --programs xdp:xdp_stats kprobe:kprobe_counter</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="go">          Example: --programs fentry:test_fentry:do_unlinkat</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="go">          [possible values for &lt;TYPE&gt;: fentry, fexit, kprobe, tc, tcx, tracepoint,</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="go">                                       uprobe, xdp]</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="go">  -i, --image-url &lt;IMAGE_URL&gt;</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="go">          Required: Container Image URL.</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="go">          Example: --image-url quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="go">  -r, --registry-auth &lt;REGISTRY_AUTH&gt;</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="go">          Optional: Registry auth for authenticating with the specified image registry.</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="go">          This should be base64 encoded from the &#39;&lt;username&gt;:&lt;password&gt;&#39; string just like</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="go">          it&#39;s stored in the docker/podman host config.</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="go">          Example: --registry_auth &quot;YnjrcKw63PhDcQodiU9hYxQ2&quot;</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="go">  -p, --pull-policy &lt;PULL_POLICY&gt;</span>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="go">          Optional: Pull policy for remote images.</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a><span class="go">          [possible values: Always, IfNotPresent, Never]</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a><span class="go">          [default: IfNotPresent]</span>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a><span class="go">  -g, --global &lt;GLOBAL&gt;...</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a><span class="go">          Optional: Global variables to be set when program is loaded.</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a><span class="go">          Format: &lt;NAME&gt;=&lt;Hex Value&gt;</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a><span class="go">          This is a very low level primitive. The caller is responsible for formatting</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a><span class="go">          the byte string appropriately considering such things as size, endianness,</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a><span class="go">          alignment and packing of data structures. Multiple values can be enter by</span>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a><span class="go">          separating each &lt;NAME&gt;=&lt;Hex Value&gt; pair with a space.</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a><span class="go">          Example: -g GLOBAL_u8=01 GLOBAL_u32=0A0B0C0D</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a><span class="go">  -a, --application &lt;APPLICATION&gt;</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a><span class="go">          Optional: Application is used to group multiple programs that are loaded together</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a><span class="go">          under the same load command. This actually creates a special &lt;KEY&gt;=&lt;VALUE&gt; in the</span>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a><span class="go">          metadata parameter. It can be used to filer on list commands.</span>
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a><span class="go">          Example: --application TestEbpfApp</span>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a>
<a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a><span class="go">  -m, --metadata &lt;METADATA&gt;</span>
<a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a><span class="go">          Optional: Specify Key/Value metadata to be attached to a program when it</span>
<a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a><span class="go">          is loaded by bpfman.</span>
<a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a><span class="go">          Format: &lt;KEY&gt;=&lt;VALUE&gt;</span>
<a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a>
<a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a><span class="go">          This can later be used to list a certain subset of programs which contain</span>
<a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a><span class="go">          the specified metadata.</span>
<a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a><span class="go">          Example: --metadata owner=acme</span>
<a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a>
<a id="__codelineno-4-68" name="__codelineno-4-68" href="#__codelineno-4-68"></a><span class="go">      --map-owner-id &lt;MAP_OWNER_ID&gt;</span>
<a id="__codelineno-4-69" name="__codelineno-4-69" href="#__codelineno-4-69"></a><span class="go">          Optional: Program Id of loaded eBPF program this eBPF program will share a map with.</span>
<a id="__codelineno-4-70" name="__codelineno-4-70" href="#__codelineno-4-70"></a><span class="go">          Only used when multiple eBPF programs need to share a map.</span>
<a id="__codelineno-4-71" name="__codelineno-4-71" href="#__codelineno-4-71"></a><span class="go">          Example: --map-owner-id 63178</span>
<a id="__codelineno-4-72" name="__codelineno-4-72" href="#__codelineno-4-72"></a>
<a id="__codelineno-4-73" name="__codelineno-4-73" href="#__codelineno-4-73"></a><span class="go">  -h, --help</span>
<a id="__codelineno-4-74" name="__codelineno-4-74" href="#__codelineno-4-74"></a><span class="go">          Print help (see a summary with &#39;-h&#39;)</span>
</code></pre></div>
<h3 id="example-load-commands">Example Load Commands</h3>
<p>Below are some different examples for using the <code>bpfmam load</code> command.</p>
<h4 id="loading-from-local-file">Loading From Local File</h4>
<p>The following is an example of the <code>tc</code> command from local file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="go">cd bpfman/</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="go">sudo bpfman load file -p tests/integration-test/bpf/.output/tc_pass.bpf/bpf_x86_bpfel.o \</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="go">     --programs tc:pass --application TcPassProgram</span>
</code></pre></div>
<p>For the <code>--programs tc:pass</code> program loaded with the command above, the <code>&lt;FUNC_NAME&gt;</code>
would be set as shown in the following snippet, taken from the function name,
not <code>SEC()</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">SEC</span><span class="p">(</span><span class="s">&quot;classifier/pass&quot;</span><span class="p">)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">pass</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">__sk_buff</span><span class="w"> </span><span class="o">*</span><span class="n">skb</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p">{</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="o">:</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="p">}</span>
</code></pre></div>
<h4 id="loading-from-remote-repository">Loading From Remote Repository</h4>
<p>Below is an example loading an eBPF program packaged in a OCI container image
from a given registry:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="go">sudo bpfman load image --image-url quay.io/bpfman-bytecode/xdp_pass:latest \</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="go">     --programs xdp:pass --application XdpPassProgram</span>
</code></pre></div>
<h4 id="loading-multiple-programs">Loading Multiple Programs</h4>
<p>An eBPF bytecode image can can contain multiple programs.
Below is an example of how to load multiple eBPF programs in one load command.
Commands that are loaded together can share global data and maps.
Optionally, include an <code>application</code> name that can be used to group the load
programs together when displaying.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="go">sudo bpfman load image --image-url quay.io/bpfman-bytecode/go-app-counter:latest \</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="go">   --programs kprobe:kprobe_counter tracepoint:tracepoint_kill_recorder tc:stats \</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="go">              tcx:tcx_stats uprobe:uprobe_counter xdp:xdp_stats  --application go-app</span>
</code></pre></div>
<h4 id="loading-fentryfexit-programs">Loading fentry/fexit Programs</h4>
<p>Below is an example loading an fentry program (fexit is similar).
The fentry and fexit commands require the attach point at load time, which
is the name of the function the eBPF will be attached too.
The function name is included in the <code>--programs</code> parameter and uses the
format: <code>&lt;TYPE&gt;:&lt;FUNC_NAME&gt;:&lt;ATTACH_FUNC&gt;</code>
The fentry and fexit programs still require a <code>bpfman attach</code> command to be
called before they will actually be triggered.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="go">sudo bpfman load image --image-url quay.io/bpfman-bytecode/fentry:latest \</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="go">     --programs fentry:test_fentry:do_unlinkat</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="go">sudo bpfman load image --image-url quay.io/bpfman-bytecode/fentry:latest \</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="go">     --programs fexit:test_fexit:do_unlinkat</span>
</code></pre></div>
<h4 id="loading-probe-versus-retprobe-programs">Loading probe Versus retprobe Programs</h4>
<p><code>kprobe</code> and <code>kretprobe</code> (as well as <code>uprobe</code> and <code>uretprobe</code>) are loaded and attached
with the same set of attributes.
From the kernel's perspective, probes and retprobes are both probes.
What distinguishes a probe from a retprobe is the <code>SEC(..)</code> header in the code.
For example, <code>kprobe</code> will look something like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">SEC</span><span class="p">(</span><span class="s">&quot;kprobe/my_kprobe&quot;</span><span class="p">)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">my_kprobe</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="n">bpf_printk</span><span class="p">(</span><span class="s">&quot; KP: GLOBAL_u8: 0x%02X, GLOBAL_u32: 0x%08X&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GLOBAL_u8</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">             </span><span class="n">GLOBAL_u32</span><span class="p">);</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="p">}</span>
</code></pre></div>
<p>Whereas <code>kretprobe</code> may look something like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">SEC</span><span class="p">(</span><span class="s">&quot;kretprobe/my_kretprobe&quot;</span><span class="p">)</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">my_kretprobe</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="n">bpf_printk</span><span class="p">(</span><span class="s">&quot;KRP: GLOBAL_u8: 0x%02X, GLOBAL_u32: 0x%08X&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GLOBAL_u8</span><span class="p">,</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">             </span><span class="n">GLOBAL_u32</span><span class="p">);</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="p">}</span>
</code></pre></div>
<p>But loading each type of program is similar:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="go">sudo bpfman load image --image-url quay.io/bpfman-bytecode/kprobe:latest \</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="go">   --programs kprobe:my_kprobe</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="go">sudo bpfman load image --image-url quay.io/bpfman-bytecode/kretprobe:latest \</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="go">   --programs kprobe:my_kretprobe</span>
</code></pre></div>
<h3 id="setting-global-variables-in-ebpf-programs">Setting Global Variables in eBPF Programs</h3>
<p>Global variables can be set for any eBPF program type when loading as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="go">cd bpfman/</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="go">sudo bpfman load file -p tests/integration-test/bpf/.output/tc_pass.bpf/bpf_x86_bpfel.o \</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="go">     --programs tc:pass -g GLOBAL_u8=01 GLOBAL_u32=0A0B0C0D --application TcGlobal</span>
</code></pre></div>
<p>Note that when setting global variables, the eBPF program being loaded must
have global variables named with the strings given, and the size of the value
provided must match the size of the given variable.  For example, the above
command can be used to update the following global variables in an eBPF program.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">volatile</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">__u32</span><span class="w"> </span><span class="n">GLOBAL_u8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="k">volatile</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">__u32</span><span class="w"> </span><span class="n">GLOBAL_u32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></pre></div>
<h2 id="bpfman-attach">bpfman attach</h2>
<p>The <code>bpfman attach</code> command is used to attach an eBPF program to a hook point.
Each program type (i.e. <code>&lt;COMMAND&gt;</code>) has it's own set of attributes specific to the program type,
and those program specific attributes MUST come after the <code>Program ID</code> (from the load command) and
the program type are entered.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="go">sudo bpfman attach --help</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="go">Attach an eBPF program to a hook point using the Program Id</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="go">Usage: bpfman attach &lt;PROGRAM_ID&gt; &lt;COMMAND&gt;</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="go">Commands:</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="go">  xdp         Install an eBPF program on the XDP hook point for a given interface</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="go">  tc          Install an eBPF program on the TC hook point for a given interface</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="go">  tcx         Install an eBPF program on the TCX hook point for a given interface and direction</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="go">  tracepoint  Install an eBPF program on a Tracepoint</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="go">  kprobe      Install a kprobe or kretprobe eBPF probe</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="go">  uprobe      Install a uprobe or uretprobe eBPF probe</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="go">  fentry      Install a fentry eBPF probe</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="go">  fexit       Install a fexit eBPF probe</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="go">  help        Print this message or the help of the given subcommand(s)</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="go">Arguments:</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="go">  &lt;PROGRAM_ID&gt;  Required: Program Id to be attached</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="go">Options:</span>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="go">  -h, --help  Print help</span>
</code></pre></div>
<p>Each <code>&lt;COMMAND&gt;</code> has its own custom parameters:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="go">sudo bpfman attach xdp --help</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="go">Install an eBPF program on the XDP hook point for a given interface</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="go">Usage: bpfman attach &lt;PROGRAM_ID&gt; xdp [OPTIONS] --iface &lt;IFACE&gt; --priority &lt;PRIORITY&gt;</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="go">Options:</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="go">  -i, --iface &lt;IFACE&gt;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="go">          Required: Interface to load program on</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="go">  -p, --priority &lt;PRIORITY&gt;</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="go">          Required: Priority to run program in chain. Lower value runs first.</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="go">          [possible values: 1-1000]</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="go">      --proceed-on &lt;PROCEED_ON&gt;...</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="go">          Optional: Proceed to call other programs in chain on this exit code.</span>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="go">          Multiple values supported by repeating the parameter.</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="go">          Example: --proceed-on pass --proceed-on drop</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="go">          [possible values: aborted, drop, pass, tx, redirect, dispatcher_return]</span>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a><span class="go">          [default: pass, dispatcher_return]</span>
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a><span class="go">  -n, --netns &lt;NETNS&gt;</span>
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="go">          Optional: The file path of the target network namespace.</span>
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a><span class="go">          Example: -n /var/run/netns/bpfman-test</span>
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a><span class="go">  -m, --metadata &lt;METADATA&gt;</span>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a><span class="go">          Optional: Specify Key/Value metadata to be attached to a link when it</span>
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="go">          is loaded by bpfman.</span>
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a><span class="go">          Format: &lt;KEY&gt;=&lt;VALUE&gt;</span>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a><span class="go">          This can later be used to list a certain subset of links which contain</span>
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a><span class="go">          the specified metadata.</span>
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a><span class="go">          Example: --metadata owner=acme</span>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>
<a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a><span class="go">  -h, --help</span>
<a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a><span class="go">          Print help (see a summary with &#39;-h&#39;)```</span>
<a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>
<a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a><span class="go">Example attaching an XDP Program:</span>
<a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>
<a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a><span class="go">```console</span>
<a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a><span class="go">sudo bpfman attach 63674 xdp --iface eno3 --priority 100</span>
</code></pre></div>
<p>The <code>tc</code> command is similar to <code>xdp</code>, but it also requires the <code>direction</code> option
and the <code>proceed-on</code> values are different.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="go">sudo bpfman attach tc --help</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="go">Install an eBPF program on the TC hook point for a given interface</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="go">Usage: bpfman attach &lt;PROGRAM_ID&gt; tc [OPTIONS] --direction &lt;DIRECTION&gt; --iface &lt;IFACE&gt; --priority &lt;PRIORITY&gt;</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="go">Options:</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="go">  -d, --direction &lt;DIRECTION&gt;</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="go">          Required: Direction to apply program.</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="go">          [possible values: ingress, egress]</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="go">  -i, --iface &lt;IFACE&gt;</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="go">          Required: Interface to load program on</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="go">  -p, --priority &lt;PRIORITY&gt;</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="go">          Required: Priority to run program in chain. Lower value runs first.</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="go">          [possible values: 1-1000]</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="go">      --proceed-on &lt;PROCEED_ON&gt;...</span>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="go">          Optional: Proceed to call other programs in chain on this exit code.</span>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="go">          Multiple values supported by repeating the parameter.</span>
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="go">          Example: --proceed-on ok --proceed-on pipe</span>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="go">          [possible values: unspec, ok, reclassify, shot, pipe, stolen, queued,</span>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="go">                            repeat, redirect, trap, dispatcher_return]</span>
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="go">          [default: ok, pipe, dispatcher_return]</span>
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a><span class="go">  -n, --netns &lt;NETNS&gt;</span>
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a><span class="go">          Optional: The file path of the target network namespace.</span>
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a><span class="go">          Example: -n /var/run/netns/bpfman-test</span>
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a><span class="go">  -m, --metadata &lt;METADATA&gt;</span>
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a><span class="go">          Optional: Specify Key/Value metadata to be attached to a link when it</span>
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a><span class="go">          is loaded by bpfman.</span>
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a><span class="go">          Format: &lt;KEY&gt;=&lt;VALUE&gt;</span>
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a><span class="go">          This can later be used to list a certain subset of links which contain</span>
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a><span class="go">          the specified metadata.</span>
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a><span class="go">          Example: --metadata owner=acme</span>
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a><span class="go">  -h, --help</span>
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a><span class="go">          Print help (see a summary with &#39;-h&#39;)</span>
</code></pre></div>
<p>The following is an example of attaching the <code>tc</code> command using short option names:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="go">sudo bpfman attach 63671 tc -d ingress -i eno3 -p 40</span>
</code></pre></div>
<h3 id="additional-attach-examples">Additional Attach Examples</h3>
<p>Below are some additional examples of <code>bpfman attach</code> commands:</p>
<h4 id="fentry">Fentry</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="go">sudo bpfman attach 63682 fentry</span>
</code></pre></div>
<h4 id="fexit">Fexit</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="go">sudo bpfman attach 63744 fexit</span>
</code></pre></div>
<h4 id="kprobe">Kprobe</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="go">sudo bpfman attach 63690 kprobe -f try_to_wake_up</span>
</code></pre></div>
<h4 id="kretprobe">Kretprobe</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="go">sudo bpfman attach 63698 kprobe -f try_to_wake_up</span>
</code></pre></div>
<h4 id="tc">TC</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="go">sudo bpfman attach 63706 tc --direction ingress --iface eno3 --priority 110</span>
</code></pre></div>
<h4 id="tcx">TCX</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="go">sudo bpfman attach 63672 tcx --direction ingress --iface eno3 --priority 22</span>
</code></pre></div>
<h4 id="tracepoint">Tracepoint</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="go">sudo bpfman attach 63670 tracepoint --tracepoint syscalls/sys_enter_openat</span>
</code></pre></div>
<h4 id="uprobe">Uprobe</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="go">sudo bpfman attach 63673 uprobe -t &quot;libc&quot; -f &quot;malloc&quot;</span>
</code></pre></div>
<h4 id="uretprobe">Uretprobe</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="go">sudo bpfman attach 63809 uprobe -t &quot;libc&quot; -f &quot;malloc&quot;</span>
</code></pre></div>
<h4 id="xdp">XDP</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="go">sudo bpfman attach 63674 xdp --iface eno3 --priority 35</span>
</code></pre></div>
<h3 id="attach-to-multiple-hook-points">Attach to Multiple Hook Points</h3>
<p>Most programs can attach to multiple hook points.
To attach a program to multiple hook points, simply call <code>bpfman attach</code>
multiple times with the same <code>Program ID</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="go">sudo bpfman attach 63661 xdp --iface eno3 --priority 35</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="go">sudo bpfman attach 63661 xdp --iface eno4 --priority 35</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="go">sudo bpfman list programs --application XdpPassProgram</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="go"> Program ID  Application     Type  Function Name  Links</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="go"> 63661       XdpPassProgram  xdp   pass           (2) 1301256968, 18827142</span>
</code></pre></div>
<h3 id="modifying-the-proceed-on-behavior">Modifying the Proceed-On Behavior</h3>
<p>The <code>proceed-on</code> setting applies to <code>xdp</code> and <code>tc</code> programs. For both of these
program types, an ordered list of eBPF programs is maintained per attach point.
The <code>proceed-on</code> setting determines whether processing will "proceed" to the
next eBPF program in the list, or terminate processing and return, based on the
program's return value. For example, the default <code>proceed-on</code> configuration for
an <code>xdp</code> program can be modified as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="go">sudo bpfman attach 63661 xdp -i eno3 -p 30 --proceed-on drop pass dispatcher_return</span>
</code></pre></div>
<h2 id="bpfman-detach">bpfman detach</h2>
<p>The <code>bpfman detach</code> command is used to detach an eBPF program from a hook point.
When detached, the eBPF program is still loaded in kernel memory, but it is not
attached to the hook point, so the eBPF program will not be triggered.
The <code>bpfman detach</code> takes the <code>Link ID</code>, which can be obtained from the
<code>bpfman list programs|links</code> or <code>bpfman get program|link</code> commands.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="go">sudo bpfman detach --help</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="go">Detach an eBPF program from a hook point using the Link Id</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="go">Usage: bpfman detach &lt;LINK_ID&gt;</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="go">Arguments:</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="go">  &lt;LINK_ID&gt;  Required: Link Id to be detached</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="go">Options:</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="go">  -h, --help  Print help</span>
</code></pre></div>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="go">sudo bpfman list programs</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="go"> Program ID  Application     Type        Function Name    Links</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="go"> 63652       TcPassProgram   tc          pass</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="go"> 63661       XdpPassProgram  xdp         pass             (3) 1301256968, 18827142, 3974774760</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="go"> 63669       go-app          kprobe      kprobe_counter</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="go"> 63670       go-app          tracepoint  tracepoint_kill  (1) 1462192047</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="go"> 63671       go-app          tc          stats            (1) 3041462868</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="go"> 63672       go-app          tcx         tcx_stats        (1) 3926782293</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="go"> 63673       go-app          uprobe      uprobe_counter</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="go"> 63674       go-app          xdp         xdp_stats        (2) 241636937, 4229414503</span>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="go"> 63682                       fentry      test_fentry      (1) 294437142</span>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="go"> 63690                       kprobe      my_kprobe        (1) 2131925936</span>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="go"> 63698                       kprobe      my_kretprobe     (1) 1834679786</span>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="go"> 63706       TcGlobal        tc          pass             (1) 2333059649</span>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="go"> 63744                       fexit       test_fexit       (1) 2055942218</span>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="go"> 63809                       uprobe      uretprobe_count  (1) 800266964</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="go">sudo bpfman detach 3974774760</span>
</code></pre></div>
<h2 id="bpfman-list">bpfman list</h2>
<p>The <code>bpfman list programs</code> command lists all the bpfman loaded eBPF programs and
the <code>bpfman list links</code> command lists all the bpfman attached eBPF programs.</p>
<h3 id="bpfman-list-programs">bpfman list programs</h3>
<p>Use the <code>bpfman list programs</code> command lists all the bpfman loaded eBPF programs.
From the output of the command, if there is a value for the <code>Links</code> parameter,
then the program has been loaded and attached.
If no value exists, the program has only been loaded (or not managed by bpfman).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="go">sudo bpfman list programs</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="go"> Program ID  Application     Type        Function Name    Links</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="go"> 63652       TcPassProgram   tc          pass</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="go"> 63661       XdpPassProgram  xdp         pass             (2) 1301256968, 18827142</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="go"> 63669       go-app          kprobe      kprobe_counter</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="go"> 63670       go-app          tracepoint  tracepoint_kill  (1) 1462192047</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="go"> 63671       go-app          tc          stats            (1) 3041462868</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="go"> 63672       go-app          tcx         tcx_stats        (1) 3926782293</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="go"> 63673       go-app          uprobe      uprobe_counter</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="go"> 63674       go-app          xdp         xdp_stats        (2) 241636937, 4229414503</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="go"> 63682                       fentry      test_fentry      (1) 294437142</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="go"> 63690                       kprobe      my_kprobe        (1) 2131925936</span>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="go"> 63698                       kprobe      my_kretprobe     (1) 1834679786</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="go"> 63706       TcGlobal        tc          pass             (1) 2333059649</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="go"> 63744                       fexit       test_fexit       (1) 2055942218</span>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="go"> 63809                       uprobe      uretprobe_count  (1) 800266964</span>
</code></pre></div>
<p>If the <code>--application</code> parameter was used during the <code>bpfman load</code> command, that
can be used to filter the programs displayed in the command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="go">sudo bpfman list programs --application go-app</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="go"> Program ID  Application  Type        Function Name    Links</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="go"> 63669       go-app       kprobe      kprobe_counter</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="go"> 63670       go-app       tracepoint  tracepoint_kill  (1) 1462192047</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="go"> 63671       go-app       tc          stats            (1) 3041462868</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="go"> 63672       go-app       tcx         tcx_stats        (1) 3926782293</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="go"> 63673       go-app       uprobe      uprobe_counter</span>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="go"> 63674       go-app       xdp         xdp_stats        (2) 241636937, 422941450</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="go"> ```</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="go">To see all eBPF programs loaded on the system, not just bpfman loaded programs,</span>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="go">include the `--all` option.</span>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a><span class="go">```console</span>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a><span class="go">sudo bpfman list programs --all</span>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a><span class="go"> :</span>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a><span class="go"> 63638                       cgroup_device  sd_devices</span>
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a><span class="go"> 63639                       cgroup_skb     sd_fw_egress</span>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a><span class="go"> 63640                       cgroup_skb     sd_fw_ingress</span>
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a><span class="go"> 63641                       cgroup_device  sd_devices</span>
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a><span class="go"> 63642                       cgroup_skb     sd_fw_egress</span>
<a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a><span class="go"> 63643                       cgroup_skb     sd_fw_ingress</span>
<a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a><span class="go"> 63651                       tc             tc_dispatcher</span>
<a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a><span class="go"> 63652       TcPassProgram   tc             pass</span>
<a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a><span class="go"> 63660                       xdp            xdp_dispatcher</span>
<a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a><span class="go"> 63661       XdpPassProgram  xdp            pass             (2) 1301256968, 18827142</span>
<a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a><span class="go"> 63669       go-app          kprobe         kprobe_counter</span>
<a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a><span class="go"> 63670       go-app          tracepoint     tracepoint_kill  (1) 1462192047</span>
<a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a><span class="go"> 63671       go-app          tc             stats            (1) 3041462868</span>
<a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a><span class="go"> 63672       go-app          tcx            tcx_stats        (1) 3926782293</span>
<a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a><span class="go"> 63673       go-app          uprobe         uprobe_counter</span>
<a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a><span class="go"> 63674       go-app          xdp            xdp_stats        (2) 241636937, 4229414503</span>
<a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a><span class="go"> 63682                       fentry         test_fentry      (1) 294437142</span>
<a id="__codelineno-36-34" name="__codelineno-36-34" href="#__codelineno-36-34"></a><span class="go"> 63690                       kprobe         my_kprobe        (1) 2131925936</span>
<a id="__codelineno-36-35" name="__codelineno-36-35" href="#__codelineno-36-35"></a><span class="go"> 63698                       kprobe         my_kretprobe     (1) 1834679786</span>
<a id="__codelineno-36-36" name="__codelineno-36-36" href="#__codelineno-36-36"></a><span class="go"> 63706       TcGlobal        tc             pass             (1) 2333059649</span>
<a id="__codelineno-36-37" name="__codelineno-36-37" href="#__codelineno-36-37"></a><span class="go"> 63744                       fexit          test_fexit       (1) 2055942218</span>
<a id="__codelineno-36-38" name="__codelineno-36-38" href="#__codelineno-36-38"></a><span class="go"> 63787                       tc             tc_dispatcher</span>
<a id="__codelineno-36-39" name="__codelineno-36-39" href="#__codelineno-36-39"></a><span class="go"> 63809                       uprobe         uretprobe_count  (1) 800266964</span>
<a id="__codelineno-36-40" name="__codelineno-36-40" href="#__codelineno-36-40"></a><span class="go"> 63847                       xdp            xdp_dispatcher</span>
<a id="__codelineno-36-41" name="__codelineno-36-41" href="#__codelineno-36-41"></a><span class="go"> 63884                       xdp            xdp_dispatcher</span>
<a id="__codelineno-36-42" name="__codelineno-36-42" href="#__codelineno-36-42"></a><span class="go"> ```</span>
<a id="__codelineno-36-43" name="__codelineno-36-43" href="#__codelineno-36-43"></a>
<a id="__codelineno-36-44" name="__codelineno-36-44" href="#__codelineno-36-44"></a><span class="go">To filter on a given program type, include the `--program-type` parameter:</span>
<a id="__codelineno-36-45" name="__codelineno-36-45" href="#__codelineno-36-45"></a>
<a id="__codelineno-36-46" name="__codelineno-36-46" href="#__codelineno-36-46"></a><span class="go">```console</span>
<a id="__codelineno-36-47" name="__codelineno-36-47" href="#__codelineno-36-47"></a><span class="go">sudo bpfman list programs --all --program-type tc</span>
<a id="__codelineno-36-48" name="__codelineno-36-48" href="#__codelineno-36-48"></a><span class="go"> Program ID  Application    Type  Function Name  Links</span>
<a id="__codelineno-36-49" name="__codelineno-36-49" href="#__codelineno-36-49"></a><span class="go"> 63651                      tc    tc_dispatcher</span>
<a id="__codelineno-36-50" name="__codelineno-36-50" href="#__codelineno-36-50"></a><span class="go"> 63652       TcPassProgram  tc    pass</span>
<a id="__codelineno-36-51" name="__codelineno-36-51" href="#__codelineno-36-51"></a><span class="go"> 63671       go-app         tc    stats          (1) 3041462868</span>
<a id="__codelineno-36-52" name="__codelineno-36-52" href="#__codelineno-36-52"></a><span class="go"> 63672       go-app         tcx   tcx_stats      (1) 3926782293</span>
<a id="__codelineno-36-53" name="__codelineno-36-53" href="#__codelineno-36-53"></a><span class="go"> 63706       TcGlobal       tc    pass           (1) 2333059649</span>
<a id="__codelineno-36-54" name="__codelineno-36-54" href="#__codelineno-36-54"></a><span class="go"> 63787                      tc    tc_dispatcher</span>
</code></pre></div>
<p><strong>Note:</strong> The list filters by the Kernel Program Type.</p>
<ul>
<li><strong>probe</strong>: <code>kprobe</code>, <code>kretprobe</code>, <code>uprobe</code> and <code>uretprobe</code> all map to the <code>probe</code> Kernel Program Type.</li>
<li><strong>tracing</strong>: <code>fentry</code> and <code>fexit</code> both map to the <code>tracing</code> Kernel Program Type.</li>
<li><strong>tc</strong>: <code>tc</code> and <code>tcx</code> both map to the <code>tc</code> Kernel Program Type.</li>
</ul>
<h3 id="bpfman-list-links">bpfman list links</h3>
<p>Use the <code>bpfman list links</code> command lists all the bpfman attached eBPF programs.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="go">sudo bpfman list links</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="go"> Program ID  Link ID     Application     Type        Function Name    Attachment</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="go"> 63661       1301256968  XdpPassProgram  xdp         pass             eno4 pos-0</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="go"> 63661       18827142    XdpPassProgram  xdp         pass             eno3 pos-0</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="go"> 63670       1462192047  go-app          tracepoint  tracepoint_kill  syscalls/sys_enter_openat</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="go"> 63671       3041462868  go-app          tc          stats            eno3 ingress pos-0</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="go"> 63672       3926782293  go-app          tcx         tcx_stats        eno3 ingress pos-0</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="go"> 63674       241636937   go-app          xdp         xdp_stats        eno3 pos-2</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="go"> 63674       4229414503  go-app          xdp         xdp_stats        eno3 pos-1</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="go"> 63682       294437142                   fentry      test_fentry      do_unlinkat</span>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="go"> 63690       2131925936                  kprobe      my_kprobe        try_to_wake_up</span>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="go"> 63698       1834679786                  kprobe      my_kretprobe     try_to_wake_up</span>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a><span class="go"> 63706       2333059649  TcGlobal        tc          pass             eno3 ingress pos-1</span>
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a><span class="go"> 63744       2055942218                  fexit       test_fexit       do_unlinkat</span>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a><span class="go"> 63809       800266964                   uprobe      uretprobe_count  libc malloc</span>
</code></pre></div>
<p>If the <code>--application</code> parameter was used during the <code>bpfman load</code> command, that
can be used to filter the programs displayed in the command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="go">sudo bpfman list links --application go-app</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="go"> Program ID  Link ID     Application  Type        Function Name    Attachment</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="go"> 63670       1462192047  go-app       tracepoint  tracepoint_kill  syscalls/sys_enter_openat</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="go"> 63671       3041462868  go-app       tc          stats            eno3 ingress pos-0</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="go"> 63672       3926782293  go-app       tcx         tcx_stats        eno3 ingress pos-0</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="go"> 63674       241636937   go-app       xdp         xdp_stats        eno3 pos-2</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="go"> 63674       4229414503  go-app       xdp         xdp_stats        eno3 pos-1</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="go"> ```</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="go">To filter on a given program type, include the `--program-type` parameter:</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="go">```console</span>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="go">sudo bpfman list links -p tc</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="go"> Program ID  Link ID     Application  Type  Function Name  Attachment</span>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="go"> 63671       3041462868  go-app       tc    stats          eno3 ingress pos-0</span>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="go"> 63672       3926782293  go-app       tcx   tcx_stats      eno3 ingress pos-0</span>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="go"> 63706       2333059649  TcGlobal     tc    pass           eno3 ingress pos-1</span>
</code></pre></div>
<p><strong>Note:</strong> The list filters by the Kernel Program Type.</p>
<ul>
<li><strong>probe</strong>: <code>kprobe</code>, <code>kretprobe</code>, <code>uprobe</code> and <code>uretprobe</code> all map to the <code>probe</code> Kernel Program Type.</li>
<li><strong>tracing</strong>: <code>fentry</code> and <code>fexit</code> both map to the <code>tracing</code> Kernel Program Type.</li>
<li><strong>tc</strong>: <code>tc</code> and <code>tcx</code> both map to the <code>tc</code> Kernel Program Type.</li>
</ul>
<h2 id="bpfman-get">bpfman get</h2>
<p>To retrieve detailed information for a loaded eBPF program, use the
<code>bpfman get program &lt;PROGRAM_ID&gt;</code> command.
To retrieve detailed information for an attached eBPF program, use the
<code>bpfman get link &lt;LINK_ID&gt;</code> command.</p>
<h3 id="bpfman-get-program">bpfman get program</h3>
<p>To retrieve detailed information for a loaded eBPF program, use the
<code>bpfman get program &lt;PROGRAM_ID&gt;</code> command.
If the eBPF program was loaded via bpfman, then there will be a <code>Bpfman State</code>
section with bpfman related attributes and a <code>Kernel State</code> section with
kernel information.
If the eBPF program was loaded outside of bpfman, then the <code>Bpfman State</code>
section will be empty and <code>Kernel State</code> section will be populated.</p>
<p>bpfman managed eBPF Program:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="go">sudo bpfman get program 63661</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="go"> Bpfman State</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="go">---------------</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="go"> BPF Function:  pass</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="go"> Program Type:  xdp</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="go"> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="go"> Pull Policy:   IfNotPresent</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="go"> Global:        None</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="go"> Metadata:      bpfman_application=XdpPassProgram</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="go"> Map Pin Path:  /run/bpfman/fs/maps/63661</span>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="go"> Map Owner ID:  None</span>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="go"> Maps Used By:  63661</span>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="go"> Links:         1301256968 (eno4 pos-0)</span>
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a><span class="go">                18827142 (eno3 pos-0)</span>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="go"> Kernel State</span>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="go">----------------------------------</span>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="go"> Program ID:                       63661</span>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="go"> BPF Function:                     pass</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="go"> Kernel Type:                      xdp</span>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a><span class="go"> Loaded At:                        2025-04-01T10:26:22-0400</span>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a><span class="go"> Tag:                              4b9d1b2c140e87ce</span>
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="go"> GPL Compatible:                   true</span>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a><span class="go"> Map IDs:                          [21083]</span>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a><span class="go"> BTF ID:                           31353</span>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a><span class="go"> Size Translated (bytes):          96</span>
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a><span class="go"> JITted:                           true</span>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a><span class="go"> Size JITted:                      75</span>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a><span class="go"> Kernel Allocated Memory (bytes):  4096</span>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="go"> Verified Instruction Count:       9</span>
</code></pre></div>
<p>Non-bpfman managed eBPF Program:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="go">sudo bpfman get program 63643</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="go"> Kernel State</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="go">----------------------------------</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="go"> Program ID:                       63643</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="go"> BPF Function:                     sd_fw_ingress</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="go"> Kernel Type:                      cgroup_skb</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="go"> Loaded At:                        2025-04-01T10:25:02-0400</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="go"> Tag:                              6deef7357e7b4530</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="go"> GPL Compatible:                   true</span>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="go"> Map IDs:                          []</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="go"> BTF ID:                           0</span>
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="go"> Size Translated (bytes):          64</span>
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="go"> JITted:                           true</span>
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="go"> Size JITted:                      63</span>
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="go"> Kernel Allocated Memory (bytes):  4096</span>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="go"> Verified Instruction Count:       8</span>
</code></pre></div>
<h3 id="bpfman-get-link">bpfman get link</h3>
<p>To retrieve detailed information for an attached eBPF program, use the
<code>bpfman get link &lt;LINK_ID&gt;</code> command.
Only bpfman loaded and attached eBPF programs contain link data.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="go">sudo bpfman get link 18827142</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="go"> Bpfman State</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="go">---------------</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="go"> BPF Function:       pass</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="go"> Program Type:       xdp</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="go"> Program ID:         63661</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="go"> Link ID:            18827142</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="go"> Interface:          eno3</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="go"> Priority:           35</span>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="go"> Position:           0</span>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="go"> Proceed On:         pass, dispatcher_return</span>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="go"> Network Namespace:  None</span>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="go"> Metadata:           bpfman_application=XdpPassProgram</span>
</code></pre></div>
<h2 id="bpfman-unload">bpfman unload</h2>
<p>The <code>bpfman unload</code> command takes the <code>Program ID</code> from the load or list command as a parameter,
and unloads the requested eBPF program.
The eBPF programs do not need to be detached before unloading.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="go">sudo bpfman unload 63661</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="go">sudo bpfman list programs</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="go"> Program ID  Application    Type        Function Name    Links</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="go"> 63652       TcPassProgram  tc          pass</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="go"> 63669       go-app         kprobe      kprobe_counter</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="go"> 63670       go-app         tracepoint  tracepoint_kill  (1) 1462192047</span>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="go"> 63671       go-app         tc          stats            (1) 3041462868</span>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="go"> 63672       go-app         tcx         tcx_stats        (1) 3926782293</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="go"> 63673       go-app         uprobe      uprobe_counter</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="go"> 63674       go-app         xdp         xdp_stats        (2) 241636937, 4229414503</span>
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="go"> 63682                      fentry      test_fentry      (1) 294437142</span>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="go"> 63690                      kprobe      my_kprobe        (1) 2131925936</span>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="go"> 63698                      kprobe      my_kretprobe     (1) 1834679786</span>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="go"> 63706       TcGlobal       tc          pass             (1) 2333059649</span>
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="go"> 63744                      fexit       test_fexit       (1) 2055942218</span>
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a><span class="go"> 63809                      uprobe      uretprobe_count  (1) 800266964</span>
</code></pre></div>
<h2 id="bpfman-image">bpfman image</h2>
<p>The <code>bpfman image</code> commands contain a set of container image related commands.</p>
<h3 id="bpfman-image-pull">bpfman image pull</h3>
<p>The <code>bpfman image pull</code> command pulls a given bytecode image for future use
by a load command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="go">sudo bpfman image pull --help</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="go">Pull an eBPF bytecode image from a remote registry</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="go">Usage: bpfman image pull [OPTIONS] --image-url &lt;IMAGE_URL&gt;</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="go">Options:</span>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="go">  -i, --image-url &lt;IMAGE_URL&gt;</span>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="go">          Required: Container Image URL.</span>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="go">          Example: --image-url quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="go">  -r, --registry-auth &lt;REGISTRY_AUTH&gt;</span>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a><span class="go">          Optional: Registry auth for authenticating with the specified image registry.</span>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a><span class="go">          This should be base64 encoded from the &#39;&lt;username&gt;:&lt;password&gt;&#39; string just like</span>
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a><span class="go">          it&#39;s stored in the docker/podman host config.</span>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a><span class="go">          Example: --registry_auth &quot;YnjrcKw63PhDcQodiU9hYxQ2&quot;</span>
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a><span class="go">  -p, --pull-policy &lt;PULL_POLICY&gt;</span>
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a><span class="go">          Optional: Pull policy for remote images.</span>
<a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a>
<a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a><span class="go">          [possible values: Always, IfNotPresent, Never]</span>
<a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a>
<a id="__codelineno-44-22" name="__codelineno-44-22" href="#__codelineno-44-22"></a><span class="go">          [default: IfNotPresent]</span>
<a id="__codelineno-44-23" name="__codelineno-44-23" href="#__codelineno-44-23"></a>
<a id="__codelineno-44-24" name="__codelineno-44-24" href="#__codelineno-44-24"></a><span class="go">  -h, --help</span>
<a id="__codelineno-44-25" name="__codelineno-44-25" href="#__codelineno-44-25"></a><span class="go">          Print help (see a summary with &#39;-h&#39;)</span>
</code></pre></div>
<p>Example usage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="go">sudo bpfman image pull --image-url quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="go">Successfully downloaded bytecode</span>
</code></pre></div>
<p>Then when loaded, the local image will be used:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="go">sudo bpfman load image --image-url quay.io/bpfman-bytecode/xdp_pass:latest \</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="go">     --programs xdp:pass</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="go"> Bpfman State</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="go"> ---------------</span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="go"> BPF Function:  pass</span>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="go"> Program Type:  xdp</span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="go"> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="go"> Pull Policy:   IfNotPresent</span>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="go"> Global:        None</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="go"> Metadata:      None</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="go"> Map Pin Path:  /run/bpfman/fs/maps/64047</span>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="go"> Map Owner ID:  None</span>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="go"> Maps Used By:  64047</span>
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="go"> Links:         None</span>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="go"> Kernel State</span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="go"> ----------------------------------</span>
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="go"> Program ID:                       64047</span>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="go"> BPF Function:                     pass</span>
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="go"> Kernel Type:                      xdp</span>
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="go"> Loaded At:                        2025-04-01T12:32:51-0400</span>
<a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="go"> Tag:                              4b9d1b2c140e87ce</span>
<a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="go"> GPL Compatible:                   true</span>
<a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="go"> Map IDs:                          [21259]</span>
<a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a><span class="go"> BTF ID:                           31787</span>
<a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a><span class="go"> Size Translated (bytes):          96</span>
<a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a><span class="go"> JITted:                           true</span>
<a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a><span class="go"> Size JITted:                      75</span>
<a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a><span class="go"> Kernel Allocated Memory (bytes):  4096</span>
<a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a><span class="go"> Verified Instruction Count:       9</span>
</code></pre></div>
<h3 id="bpfman-image-build">bpfman image build</h3>
<p>The <code>bpfman image build</code> command is a utility command that builds and pushes an eBPF program
in a OCI container image leveraging either <code>docker</code> or <code>podman</code>.
The eBPF program bytecode must already be generated.
This command calls <code>docker</code> or <code>podman</code> with the proper parameters for building
multi-architecture based images with the proper labels for a OCI container image.</p>
<p>Since this command is leveraging <code>docker</code> and <code>podman</code>, a container file (<code>--container-file</code> or <code>-f</code>)
is required, along with an image tag (<code>--tag</code> of <code>-t</code>).
In addition, the bytecode to package must be included.
The bytecode can take several forms, but at least one must be provided:</p>
<ul>
<li><code>--bytecode</code> or <code>-b</code>: Use this option for a single bytecode object file built for the host architecture.
  The value of this parameter is a single bytecode object file.</li>
<li><code>--cilium-ebpf-project</code> or <code>-c</code>: Use this option for a cilium/ebpf based project.
  The value of this parameter is a directory that contains multiple object files for different architectures,
  where the object files follow the Cilium naming convention with the architecture in the name (i.e. bpf_x86_bpfel.o,
  bpf_arm64_bpfel.o, bpf_powerpc_bpfel.o, bpf_s390_bpfeb.o).</li>
<li><code>--bc-386-el</code> .. <code>--bc-s390x-eb</code>: Use this option to add one or more architecture specific bytecode files.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="go">bpfman image build --help</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="go">Build an eBPF bytecode image from local bytecode objects and push to a registry.</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="go">To use, the --container-file and --tag must be included, as well as a pointer to</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="go">at least one bytecode file that can be passed in several ways. Use either:</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="go">* --bytecode: for a single bytecode built for the host architecture.</span>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="go">* --cilium-ebpf-project: for a cilium/ebpf project directory which contains</span>
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="go">  multiple object files for different architectures.</span>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="go">* --bc-386-el .. --bc-s390x-eb: to add one or more architecture specific bytecode files.</span>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a><span class="go">Examples:</span>
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a><span class="go">   bpfman image build -f Containerfile.bytecode -t quay.io/&lt;USER&gt;/go-xdp-counter:test \</span>
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a><span class="go">     -b ./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a>
<a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a><span class="go">Usage: bpfman image build [OPTIONS] --tag &lt;TAG&gt; --container-file &lt;CONTAINER_FILE&gt; &lt;--bytecode &lt;BYTECODE&gt;|--cilium-ebpf-project &lt;CILIUM_EBPF_PROJECT&gt;|--bc-386-el &lt;BC_386_EL&gt;|--bc-amd64-el &lt;BC_AMD64_EL&gt;|--bc-arm-el &lt;BC_ARM_EL&gt;|--bc-arm64-el &lt;BC_ARM64_EL&gt;|--bc-loong64-el &lt;BC_LOONG64_EL&gt;|--bc-mips-eb &lt;BC_MIPS_EB&gt;|--bc-mipsle-el &lt;BC_MIPSLE_EL&gt;|--bc-mips64-eb &lt;BC_MIPS64_EB&gt;|--bc-mips64le-el &lt;BC_MIPS64LE_EL&gt;|--bc-ppc64-eb &lt;BC_PPC64_EB&gt;|--bc-ppc64le-el &lt;BC_PPC64LE_EL&gt;|--bc-riscv64-el &lt;BC_RISCV64_EL&gt;|--bc-s390x-eb &lt;BC_S390X_EB&gt;&gt;</span>
<a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a>
<a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a><span class="go">Options:</span>
<a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a><span class="go">  -t, --tag &lt;TAG&gt;</span>
<a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a><span class="go">          Required: Name and optionally a tag in the name:tag format.</span>
<a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a><span class="go">          Example: --tag quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a>
<a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a><span class="go">  -f, --container-file &lt;CONTAINER_FILE&gt;</span>
<a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a><span class="go">          Required: Dockerfile to use for building the image.</span>
<a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a><span class="go">          Example: --container_file Containerfile.bytecode</span>
<a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a>
<a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a><span class="go">  -r, --runtime &lt;RUNTIME&gt;</span>
<a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a><span class="go">          Optional: Container runtime to use, works with docker or podman, defaults to docker</span>
<a id="__codelineno-47-31" name="__codelineno-47-31" href="#__codelineno-47-31"></a><span class="go">          Example: --runtime podman</span>
<a id="__codelineno-47-32" name="__codelineno-47-32" href="#__codelineno-47-32"></a>
<a id="__codelineno-47-33" name="__codelineno-47-33" href="#__codelineno-47-33"></a><span class="go">  -b, --bytecode &lt;BYTECODE&gt;</span>
<a id="__codelineno-47-34" name="__codelineno-47-34" href="#__codelineno-47-34"></a><span class="go">          Optional: bytecode file to use for building the image assuming host architecture.</span>
<a id="__codelineno-47-35" name="__codelineno-47-35" href="#__codelineno-47-35"></a><span class="go">          Example: -b ./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-47-36" name="__codelineno-47-36" href="#__codelineno-47-36"></a>
<a id="__codelineno-47-37" name="__codelineno-47-37" href="#__codelineno-47-37"></a><span class="go">  -c, --cilium-ebpf-project &lt;CILIUM_EBPF_PROJECT&gt;</span>
<a id="__codelineno-47-38" name="__codelineno-47-38" href="#__codelineno-47-38"></a><span class="go">          Optional: If specified pull multi-arch bytecode files from a cilium/ebpf formatted project</span>
<a id="__codelineno-47-39" name="__codelineno-47-39" href="#__codelineno-47-39"></a><span class="go">          where the bytecode files all contain a standard bpf_&lt;GOARCH&gt;_&lt;(el/eb)&gt;.o tag.</span>
<a id="__codelineno-47-40" name="__codelineno-47-40" href="#__codelineno-47-40"></a><span class="go">          Example: --cilium-ebpf-project ./examples/go-xdp-counter</span>
<a id="__codelineno-47-41" name="__codelineno-47-41" href="#__codelineno-47-41"></a>
<a id="__codelineno-47-42" name="__codelineno-47-42" href="#__codelineno-47-42"></a><span class="go">      --bc-386-el &lt;BC_386_EL&gt;</span>
<a id="__codelineno-47-43" name="__codelineno-47-43" href="#__codelineno-47-43"></a><span class="go">          Optional: bytecode file to use for building the image assuming amd64 architecture.</span>
<a id="__codelineno-47-44" name="__codelineno-47-44" href="#__codelineno-47-44"></a><span class="go">          Example: --bc-386-el ./examples/go-xdp-counter/bpf_386_bpfel.o</span>
<a id="__codelineno-47-45" name="__codelineno-47-45" href="#__codelineno-47-45"></a>
<a id="__codelineno-47-46" name="__codelineno-47-46" href="#__codelineno-47-46"></a><span class="go">      --bc-amd64-el &lt;BC_AMD64_EL&gt;</span>
<a id="__codelineno-47-47" name="__codelineno-47-47" href="#__codelineno-47-47"></a><span class="go">          Optional: bytecode file to use for building the image assuming amd64 architecture.</span>
<a id="__codelineno-47-48" name="__codelineno-47-48" href="#__codelineno-47-48"></a><span class="go">          Example: --bc-amd64-el ./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-47-49" name="__codelineno-47-49" href="#__codelineno-47-49"></a>
<a id="__codelineno-47-50" name="__codelineno-47-50" href="#__codelineno-47-50"></a><span class="go">      --bc-arm-el &lt;BC_ARM_EL&gt;</span>
<a id="__codelineno-47-51" name="__codelineno-47-51" href="#__codelineno-47-51"></a><span class="go">          Optional: bytecode file to use for building the image assuming arm architecture.</span>
<a id="__codelineno-47-52" name="__codelineno-47-52" href="#__codelineno-47-52"></a><span class="go">          Example: --bc-arm-el ./examples/go-xdp-counter/bpf_arm_bpfel.o</span>
<a id="__codelineno-47-53" name="__codelineno-47-53" href="#__codelineno-47-53"></a>
<a id="__codelineno-47-54" name="__codelineno-47-54" href="#__codelineno-47-54"></a><span class="go">      --bc-arm64-el &lt;BC_ARM64_EL&gt;</span>
<a id="__codelineno-47-55" name="__codelineno-47-55" href="#__codelineno-47-55"></a><span class="go">          Optional: bytecode file to use for building the image assuming arm64 architecture.</span>
<a id="__codelineno-47-56" name="__codelineno-47-56" href="#__codelineno-47-56"></a><span class="go">          Example: --bc-arm64-el ./examples/go-xdp-counter/bpf_arm64_bpfel.o</span>
<a id="__codelineno-47-57" name="__codelineno-47-57" href="#__codelineno-47-57"></a>
<a id="__codelineno-47-58" name="__codelineno-47-58" href="#__codelineno-47-58"></a><span class="go">      --bc-loong64-el &lt;BC_LOONG64_EL&gt;</span>
<a id="__codelineno-47-59" name="__codelineno-47-59" href="#__codelineno-47-59"></a><span class="go">          Optional: bytecode file to use for building the image assuming loong64 architecture.</span>
<a id="__codelineno-47-60" name="__codelineno-47-60" href="#__codelineno-47-60"></a><span class="go">          Example: --bc-loong64-el ./examples/go-xdp-counter/bpf_loong64_bpfel.o</span>
<a id="__codelineno-47-61" name="__codelineno-47-61" href="#__codelineno-47-61"></a>
<a id="__codelineno-47-62" name="__codelineno-47-62" href="#__codelineno-47-62"></a><span class="go">      --bc-mips-eb &lt;BC_MIPS_EB&gt;</span>
<a id="__codelineno-47-63" name="__codelineno-47-63" href="#__codelineno-47-63"></a><span class="go">          Optional: bytecode file to use for building the image assuming mips architecture.</span>
<a id="__codelineno-47-64" name="__codelineno-47-64" href="#__codelineno-47-64"></a><span class="go">          Example: --bc-mips-eb ./examples/go-xdp-counter/bpf_mips_bpfeb.o</span>
<a id="__codelineno-47-65" name="__codelineno-47-65" href="#__codelineno-47-65"></a>
<a id="__codelineno-47-66" name="__codelineno-47-66" href="#__codelineno-47-66"></a><span class="go">      --bc-mipsle-el &lt;BC_MIPSLE_EL&gt;</span>
<a id="__codelineno-47-67" name="__codelineno-47-67" href="#__codelineno-47-67"></a><span class="go">          Optional: bytecode file to use for building the image assuming mipsle architecture.</span>
<a id="__codelineno-47-68" name="__codelineno-47-68" href="#__codelineno-47-68"></a><span class="go">          Example: --bc-mipsle-el ./examples/go-xdp-counter/bpf_mipsle_bpfel.o</span>
<a id="__codelineno-47-69" name="__codelineno-47-69" href="#__codelineno-47-69"></a>
<a id="__codelineno-47-70" name="__codelineno-47-70" href="#__codelineno-47-70"></a><span class="go">      --bc-mips64-eb &lt;BC_MIPS64_EB&gt;</span>
<a id="__codelineno-47-71" name="__codelineno-47-71" href="#__codelineno-47-71"></a><span class="go">          Optional: bytecode file to use for building the image assuming mips64 architecture.</span>
<a id="__codelineno-47-72" name="__codelineno-47-72" href="#__codelineno-47-72"></a><span class="go">          Example: --bc-mips64-eb ./examples/go-xdp-counter/bpf_mips64_bpfeb.o</span>
<a id="__codelineno-47-73" name="__codelineno-47-73" href="#__codelineno-47-73"></a>
<a id="__codelineno-47-74" name="__codelineno-47-74" href="#__codelineno-47-74"></a><span class="go">      --bc-mips64le-el &lt;BC_MIPS64LE_EL&gt;</span>
<a id="__codelineno-47-75" name="__codelineno-47-75" href="#__codelineno-47-75"></a><span class="go">          Optional: bytecode file to use for building the image assuming mips64le architecture.</span>
<a id="__codelineno-47-76" name="__codelineno-47-76" href="#__codelineno-47-76"></a><span class="go">          Example: --bc-mips64le-el ./examples/go-xdp-counter/bpf_mips64le_bpfel.o</span>
<a id="__codelineno-47-77" name="__codelineno-47-77" href="#__codelineno-47-77"></a>
<a id="__codelineno-47-78" name="__codelineno-47-78" href="#__codelineno-47-78"></a><span class="go">      --bc-ppc64-eb &lt;BC_PPC64_EB&gt;</span>
<a id="__codelineno-47-79" name="__codelineno-47-79" href="#__codelineno-47-79"></a><span class="go">          Optional: bytecode file to use for building the image assuming ppc64 architecture.</span>
<a id="__codelineno-47-80" name="__codelineno-47-80" href="#__codelineno-47-80"></a><span class="go">          Example: --bc-ppc64-eb ./examples/go-xdp-counter/bpf_ppc64_bpfeb.o</span>
<a id="__codelineno-47-81" name="__codelineno-47-81" href="#__codelineno-47-81"></a>
<a id="__codelineno-47-82" name="__codelineno-47-82" href="#__codelineno-47-82"></a><span class="go">      --bc-ppc64le-el &lt;BC_PPC64LE_EL&gt;</span>
<a id="__codelineno-47-83" name="__codelineno-47-83" href="#__codelineno-47-83"></a><span class="go">          Optional: bytecode file to use for building the image assuming ppc64le architecture.</span>
<a id="__codelineno-47-84" name="__codelineno-47-84" href="#__codelineno-47-84"></a><span class="go">          Example: --bc-ppc64le-el ./examples/go-xdp-counter/bpf_ppc64le_bpfel.o</span>
<a id="__codelineno-47-85" name="__codelineno-47-85" href="#__codelineno-47-85"></a>
<a id="__codelineno-47-86" name="__codelineno-47-86" href="#__codelineno-47-86"></a><span class="go">      --bc-riscv64-el &lt;BC_RISCV64_EL&gt;</span>
<a id="__codelineno-47-87" name="__codelineno-47-87" href="#__codelineno-47-87"></a><span class="go">          Optional: bytecode file to use for building the image assuming riscv64 architecture.</span>
<a id="__codelineno-47-88" name="__codelineno-47-88" href="#__codelineno-47-88"></a><span class="go">          Example: --bc-riscv64-el ./examples/go-xdp-counter/bpf_riscv64_bpfel.o</span>
<a id="__codelineno-47-89" name="__codelineno-47-89" href="#__codelineno-47-89"></a>
<a id="__codelineno-47-90" name="__codelineno-47-90" href="#__codelineno-47-90"></a><span class="go">      --bc-s390x-eb &lt;BC_S390X_EB&gt;</span>
<a id="__codelineno-47-91" name="__codelineno-47-91" href="#__codelineno-47-91"></a><span class="go">          Optional: bytecode file to use for building the image assuming s390x architecture.</span>
<a id="__codelineno-47-92" name="__codelineno-47-92" href="#__codelineno-47-92"></a><span class="go">          Example: --bc-s390x-eb ./examples/go-xdp-counter/bpf_s390x_bpfeb.o</span>
<a id="__codelineno-47-93" name="__codelineno-47-93" href="#__codelineno-47-93"></a>
<a id="__codelineno-47-94" name="__codelineno-47-94" href="#__codelineno-47-94"></a><span class="go">  -h, --help</span>
<a id="__codelineno-47-95" name="__codelineno-47-95" href="#__codelineno-47-95"></a><span class="go">          Print help (see a summary with &#39;-h&#39;)</span>
</code></pre></div>
<p>Below are some different examples of building images.
Note that <code>sudo</code> is not required.
This command also pushed the image to a registry, so user must already be logged into the registry.</p>
<p>Example of single bytecode image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="go">bpfman image build -f Containerfile.bytecode -t quay.io/$QUAY_USER/go-xdp-counter:test -b ./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
</code></pre></div>
<p>Example of directory with Cilium generated bytecode objects:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="go">bpfman image build -f Containerfile.bytecode.multi.arch -t quay.io/$QUAY_USER/go-xdp-counter:test -c ./examples/go-xdp-counter/</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To build images for multiple architectures on a local system, docker (or podman) may need additional configuration
settings to allow for caching of non-native images. See
<a href="https://docs.docker.com/build/building/multi-platform/">https://docs.docker.com/build/building/multi-platform/</a>
for more details.</p>
</div>
<h3 id="bpfman-image-generate-build-args">bpfman image generate-build-args</h3>
<p>The <code>bpfman image generate-build-args</code> command is a utility command that generates the labels used
to package eBPF program bytecode in a OCI container image.
It is recommended to use the <code>bpfman image build</code> command to package the eBPF program in a OCI
container image, but an alternative is to generate the labels then build the container image with
<code>docker</code> or <code>podman</code>.</p>
<p>The eBPF program bytecode must already be generated.
The bytecode can take several forms, but at least one must be provided:</p>
<ul>
<li><code>--bytecode</code> or <code>-b</code>: Use this option for a single bytecode object file built for the host architecture.
  The value of this parameter is a single bytecode object file.</li>
<li><code>--cilium-ebpf-project</code> or <code>-c</code>: Use this option for a cilium/ebpf based project.
  The value of this parameter is a directory that contains multiple object files for different architectures,
  where the object files follow the Cilium naming convention with the architecture in the name (i.e. bpf_x86_bpfel.o,
  bpf_arm64_bpfel.o, bpf_powerpc_bpfel.o, bpf_s390_bpfeb.o).</li>
<li><code>--bc-386-el</code> .. <code>--bc-s390x-eb</code>: Use this option to add one or more architecture specific bytecode files.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="go">bpfman image generate-build-args --help</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="go">Generate the OCI image labels for a given bytecode file.</span>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="go">To use, the --container-file and --tag must be included, as well as a pointer to</span>
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="go">at least one bytecode file that can be passed in several ways. Use either:</span>
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="go">* --bytecode: for a single bytecode built for the host architecture.</span>
<a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a>
<a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="go">* --cilium-ebpf-project: for a cilium/ebpf project directory which contains</span>
<a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="go">  multiple object files for different architectures.</span>
<a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a>
<a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a><span class="go">* --bc-386-el .. --bc-s390x-eb: to add one or more architecture specific bytecode files.</span>
<a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a>
<a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a><span class="go">Examples:</span>
<a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a><span class="go">  bpfman image generate-build-args --bc-amd64-el ./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a>
<a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a><span class="go">Usage: bpfman image generate-build-args &lt;--bytecode &lt;BYTECODE&gt;|--cilium-ebpf-project &lt;CILIUM_EBPF_PROJECT&gt;|--bc-386-el &lt;BC_386_EL&gt;|--bc-amd64-el &lt;BC_AMD64_EL&gt;|--bc-arm-el &lt;BC_ARM_EL&gt;|--bc-arm64-el &lt;BC_ARM64_EL&gt;|--bc-loong64-el &lt;BC_LOONG64_EL&gt;|--bc-mips-eb &lt;BC_MIPS_EB&gt;|--bc-mipsle-el &lt;BC_MIPSLE_EL&gt;|--bc-mips64-eb &lt;BC_MIPS64_EB&gt;|--bc-mips64le-el &lt;BC_MIPS64LE_EL&gt;|--bc-ppc64-eb &lt;BC_PPC64_EB&gt;|--bc-ppc64le-el &lt;BC_PPC64LE_EL&gt;|--bc-riscv64-el &lt;BC_RISCV64_EL&gt;|--bc-s390x-eb &lt;BC_S390X_EB&gt;&gt;</span>
<a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a>
<a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a><span class="go">Options:</span>
<a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a><span class="go">  -b, --bytecode &lt;BYTECODE&gt;</span>
<a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a><span class="go">          Optional: bytecode file to use for building the image assuming host architecture.</span>
<a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a><span class="go">          Example: -b ./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a>
<a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a><span class="go">  -c, --cilium-ebpf-project &lt;CILIUM_EBPF_PROJECT&gt;</span>
<a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a><span class="go">          Optional: If specified pull multi-arch bytecode files from a cilium/ebpf formatted project</span>
<a id="__codelineno-50-26" name="__codelineno-50-26" href="#__codelineno-50-26"></a><span class="go">          where the bytecode files all contain a standard bpf_&lt;GOARCH&gt;_&lt;(el/eb)&gt;.o tag.</span>
<a id="__codelineno-50-27" name="__codelineno-50-27" href="#__codelineno-50-27"></a><span class="go">          Example: --cilium-ebpf-project ./examples/go-xdp-counter</span>
<a id="__codelineno-50-28" name="__codelineno-50-28" href="#__codelineno-50-28"></a>
<a id="__codelineno-50-29" name="__codelineno-50-29" href="#__codelineno-50-29"></a><span class="go">      --bc-386-el &lt;BC_386_EL&gt;</span>
<a id="__codelineno-50-30" name="__codelineno-50-30" href="#__codelineno-50-30"></a><span class="go">          Optional: bytecode file to use for building the image assuming amd64 architecture.</span>
<a id="__codelineno-50-31" name="__codelineno-50-31" href="#__codelineno-50-31"></a><span class="go">          Example: --bc-386-el ./examples/go-xdp-counter/bpf_386_bpfel.o</span>
<a id="__codelineno-50-32" name="__codelineno-50-32" href="#__codelineno-50-32"></a>
<a id="__codelineno-50-33" name="__codelineno-50-33" href="#__codelineno-50-33"></a><span class="go">      --bc-amd64-el &lt;BC_AMD64_EL&gt;</span>
<a id="__codelineno-50-34" name="__codelineno-50-34" href="#__codelineno-50-34"></a><span class="go">          Optional: bytecode file to use for building the image assuming amd64 architecture.</span>
<a id="__codelineno-50-35" name="__codelineno-50-35" href="#__codelineno-50-35"></a><span class="go">          Example: --bc-amd64-el ./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-50-36" name="__codelineno-50-36" href="#__codelineno-50-36"></a>
<a id="__codelineno-50-37" name="__codelineno-50-37" href="#__codelineno-50-37"></a><span class="go">      --bc-arm-el &lt;BC_ARM_EL&gt;</span>
<a id="__codelineno-50-38" name="__codelineno-50-38" href="#__codelineno-50-38"></a><span class="go">          Optional: bytecode file to use for building the image assuming arm architecture.</span>
<a id="__codelineno-50-39" name="__codelineno-50-39" href="#__codelineno-50-39"></a><span class="go">          Example: --bc-arm-el ./examples/go-xdp-counter/bpf_arm_bpfel.o</span>
<a id="__codelineno-50-40" name="__codelineno-50-40" href="#__codelineno-50-40"></a>
<a id="__codelineno-50-41" name="__codelineno-50-41" href="#__codelineno-50-41"></a><span class="go">      --bc-arm64-el &lt;BC_ARM64_EL&gt;</span>
<a id="__codelineno-50-42" name="__codelineno-50-42" href="#__codelineno-50-42"></a><span class="go">          Optional: bytecode file to use for building the image assuming arm64 architecture.</span>
<a id="__codelineno-50-43" name="__codelineno-50-43" href="#__codelineno-50-43"></a><span class="go">          Example: --bc-arm64-el ./examples/go-xdp-counter/bpf_arm64_bpfel.o</span>
<a id="__codelineno-50-44" name="__codelineno-50-44" href="#__codelineno-50-44"></a>
<a id="__codelineno-50-45" name="__codelineno-50-45" href="#__codelineno-50-45"></a><span class="go">      --bc-loong64-el &lt;BC_LOONG64_EL&gt;</span>
<a id="__codelineno-50-46" name="__codelineno-50-46" href="#__codelineno-50-46"></a><span class="go">          Optional: bytecode file to use for building the image assuming loong64 architecture.</span>
<a id="__codelineno-50-47" name="__codelineno-50-47" href="#__codelineno-50-47"></a><span class="go">          Example: --bc-loong64-el ./examples/go-xdp-counter/bpf_loong64_bpfel.o</span>
<a id="__codelineno-50-48" name="__codelineno-50-48" href="#__codelineno-50-48"></a>
<a id="__codelineno-50-49" name="__codelineno-50-49" href="#__codelineno-50-49"></a><span class="go">      --bc-mips-eb &lt;BC_MIPS_EB&gt;</span>
<a id="__codelineno-50-50" name="__codelineno-50-50" href="#__codelineno-50-50"></a><span class="go">          Optional: bytecode file to use for building the image assuming mips architecture.</span>
<a id="__codelineno-50-51" name="__codelineno-50-51" href="#__codelineno-50-51"></a><span class="go">          Example: --bc-mips-eb ./examples/go-xdp-counter/bpf_mips_bpfeb.o</span>
<a id="__codelineno-50-52" name="__codelineno-50-52" href="#__codelineno-50-52"></a>
<a id="__codelineno-50-53" name="__codelineno-50-53" href="#__codelineno-50-53"></a><span class="go">      --bc-mipsle-el &lt;BC_MIPSLE_EL&gt;</span>
<a id="__codelineno-50-54" name="__codelineno-50-54" href="#__codelineno-50-54"></a><span class="go">          Optional: bytecode file to use for building the image assuming mipsle architecture.</span>
<a id="__codelineno-50-55" name="__codelineno-50-55" href="#__codelineno-50-55"></a><span class="go">          Example: --bc-mipsle-el ./examples/go-xdp-counter/bpf_mipsle_bpfel.o</span>
<a id="__codelineno-50-56" name="__codelineno-50-56" href="#__codelineno-50-56"></a>
<a id="__codelineno-50-57" name="__codelineno-50-57" href="#__codelineno-50-57"></a><span class="go">      --bc-mips64-eb &lt;BC_MIPS64_EB&gt;</span>
<a id="__codelineno-50-58" name="__codelineno-50-58" href="#__codelineno-50-58"></a><span class="go">          Optional: bytecode file to use for building the image assuming mips64 architecture.</span>
<a id="__codelineno-50-59" name="__codelineno-50-59" href="#__codelineno-50-59"></a><span class="go">          Example: --bc-mips64-eb ./examples/go-xdp-counter/bpf_mips64_bpfeb.o</span>
<a id="__codelineno-50-60" name="__codelineno-50-60" href="#__codelineno-50-60"></a>
<a id="__codelineno-50-61" name="__codelineno-50-61" href="#__codelineno-50-61"></a><span class="go">      --bc-mips64le-el &lt;BC_MIPS64LE_EL&gt;</span>
<a id="__codelineno-50-62" name="__codelineno-50-62" href="#__codelineno-50-62"></a><span class="go">          Optional: bytecode file to use for building the image assuming mips64le architecture.</span>
<a id="__codelineno-50-63" name="__codelineno-50-63" href="#__codelineno-50-63"></a><span class="go">          Example: --bc-mips64le-el ./examples/go-xdp-counter/bpf_mips64le_bpfel.o</span>
<a id="__codelineno-50-64" name="__codelineno-50-64" href="#__codelineno-50-64"></a>
<a id="__codelineno-50-65" name="__codelineno-50-65" href="#__codelineno-50-65"></a><span class="go">      --bc-ppc64-eb &lt;BC_PPC64_EB&gt;</span>
<a id="__codelineno-50-66" name="__codelineno-50-66" href="#__codelineno-50-66"></a><span class="go">          Optional: bytecode file to use for building the image assuming ppc64 architecture.</span>
<a id="__codelineno-50-67" name="__codelineno-50-67" href="#__codelineno-50-67"></a><span class="go">          Example: --bc-ppc64-eb ./examples/go-xdp-counter/bpf_ppc64_bpfeb.o</span>
<a id="__codelineno-50-68" name="__codelineno-50-68" href="#__codelineno-50-68"></a>
<a id="__codelineno-50-69" name="__codelineno-50-69" href="#__codelineno-50-69"></a><span class="go">      --bc-ppc64le-el &lt;BC_PPC64LE_EL&gt;</span>
<a id="__codelineno-50-70" name="__codelineno-50-70" href="#__codelineno-50-70"></a><span class="go">          Optional: bytecode file to use for building the image assuming ppc64le architecture.</span>
<a id="__codelineno-50-71" name="__codelineno-50-71" href="#__codelineno-50-71"></a><span class="go">          Example: --bc-ppc64le-el ./examples/go-xdp-counter/bpf_ppc64le_bpfel.o</span>
<a id="__codelineno-50-72" name="__codelineno-50-72" href="#__codelineno-50-72"></a>
<a id="__codelineno-50-73" name="__codelineno-50-73" href="#__codelineno-50-73"></a><span class="go">      --bc-riscv64-el &lt;BC_RISCV64_EL&gt;</span>
<a id="__codelineno-50-74" name="__codelineno-50-74" href="#__codelineno-50-74"></a><span class="go">          Optional: bytecode file to use for building the image assuming riscv64 architecture.</span>
<a id="__codelineno-50-75" name="__codelineno-50-75" href="#__codelineno-50-75"></a><span class="go">          Example: --bc-riscv64-el ./examples/go-xdp-counter/bpf_riscv64_bpfel.o</span>
<a id="__codelineno-50-76" name="__codelineno-50-76" href="#__codelineno-50-76"></a>
<a id="__codelineno-50-77" name="__codelineno-50-77" href="#__codelineno-50-77"></a><span class="go">      --bc-s390x-eb &lt;BC_S390X_EB&gt;</span>
<a id="__codelineno-50-78" name="__codelineno-50-78" href="#__codelineno-50-78"></a><span class="go">          Optional: bytecode file to use for building the image assuming s390x architecture.</span>
<a id="__codelineno-50-79" name="__codelineno-50-79" href="#__codelineno-50-79"></a><span class="go">          Example: --bc-s390x-eb ./examples/go-xdp-counter/bpf_s390x_bpfeb.o</span>
<a id="__codelineno-50-80" name="__codelineno-50-80" href="#__codelineno-50-80"></a>
<a id="__codelineno-50-81" name="__codelineno-50-81" href="#__codelineno-50-81"></a><span class="go">  -h, --help</span>
<a id="__codelineno-50-82" name="__codelineno-50-82" href="#__codelineno-50-82"></a><span class="go">          Print help (see a summary with &#39;-h&#39;)</span>
</code></pre></div>
<p>Below are some different examples of generating build arguments.
Note that <code>sudo</code> is not required.</p>
<p>Example of single bytecode image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="gp">$ </span>bpfman<span class="w"> </span>image<span class="w"> </span>generate-build-args<span class="w"> </span>-b<span class="w"> </span>./examples/go-xdp-counter/bpf_x86_bpfel.o
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="go">BYTECODE_FILE=./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="go">PROGRAMS={&quot;xdp_stats&quot;:&quot;xdp&quot;}</span>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="go">MAPS={&quot;xdp_stats_map&quot;:&quot;per_cpu_array&quot;}</span>
</code></pre></div>
<p>Example of directory with Cilium generated bytecode objects:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="gp">$ </span>bpfman<span class="w"> </span>image<span class="w"> </span>generate-build-args<span class="w"> </span>-c<span class="w"> </span>./examples/go-xdp-counter/
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="go">BC_AMD64_EL=./examples/go-xdp-counter/bpf_x86_bpfel.o</span>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="go">BC_ARM_EL=./examples/go-xdp-counter/bpf_arm64_bpfel.o</span>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="go">BC_PPC64LE_EL=./examples/go-xdp-counter/bpf_powerpc_bpfel.o</span>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="go">BC_S390X_EB=./examples/go-xdp-counter/bpf_s390_bpfeb.o</span>
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="go">PROGRAMS={&quot;xdp_stats&quot;:&quot;xdp&quot;}</span>
<a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="go">MAPS={&quot;xdp_stats_map&quot;:&quot;per_cpu_array&quot;}</span>
</code></pre></div>
<p>Once the labels are generated, the eBPF program can be packaged in a OCI
container image using <code>docker</code> or <code>podman</code> by passing the generated labels
as <code>build-arg</code> parameters:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="go">docker build \</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="go">  --build-arg BYTECODE_FILE=./examples/go-xdp-counter/bpf_x86_bpfel.o \</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="go">  --build-arg PROGRAMS={&quot;xdp_stats&quot;:&quot;xdp&quot;} \</span>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="go">  --build-arg MAPS={&quot;xdp_stats_map&quot;:&quot;per_cpu_array&quot;} \</span>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="go">  -f Containerfile.bytecode . -t quay.io/$USER/go-xdp-counter-bytecode:test</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
    
      <div class="md-copyright__highlight">
        Copyright &copy; 2021-2025 The bpfman contributors.<br>The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a>.
      </div>
    
    
      Made with
      <a
        href="https://squidfunk.github.io/mkdocs-material/"
        target="_blank" rel="noopener"
      >
        Material for MkDocs
      </a>
    
  </div>
  <div class="md-copyright__netlify">
    <a href="https://www.netlify.com"> <img src="https://www.netlify.com/v3/img/components/netlify-color-accent.svg" alt="Deploys by Netlify" /> </a>
  </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.tabs.sticky", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>